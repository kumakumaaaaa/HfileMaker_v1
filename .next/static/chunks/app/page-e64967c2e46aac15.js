(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5891:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Z});var l=a(5155),s=a(2115);let r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:x,...h}=e;return(0,s.createElement)("svg",{ref:t,...n,width:l,height:l,stroke:a,strokeWidth:o?24*Number(i)/Number(l):i,className:r("lucide",d),...h},[...x.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:n,...o}=a;return(0,s.createElement)(i,{ref:l,iconNode:t,className:r("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...o})});return a.displayName="".concat(e),a},d=o("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),c=o("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),x=o("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]),h=o("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),b=e=>{let{activeTab:t,onTabChange:a}=e,s=[{id:"home",label:"ホーム",icon:d},{id:"patients",label:"患者管理",icon:c},{id:"inpatients",label:"入院患者",icon:x},{id:"wards",label:"病棟・病室",icon:x},{id:"settings",label:"マスタ設定",icon:h}];return(0,l.jsxs)("header",{className:"bg-white border-b border-gray-200 h-14 flex items-center px-4 shrink-0",children:[(0,l.jsx)("div",{className:"font-bold text-xl mr-8 text-blue-900",children:"HfileMaker"}),(0,l.jsx)("nav",{className:"flex h-full",children:s.map(e=>{let s=t===e.id,r=e.icon;return(0,l.jsxs)("button",{onClick:()=>a(e.id),className:"\n                flex items-center gap-2 px-4 h-full border-b-2 text-lg font-bold transition-colors\n                ".concat(s?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50","\n              "),children:[(0,l.jsx)(r,{className:"w-5 h-5"}),e.label]},e.id)})}),(0,l.jsx)("div",{className:"ml-auto flex items-center gap-4 text-xs text-gray-400",children:"Demo User"})]})},g=[{id:"a_wounds",category:"a",label:"創傷処置",points:1,inputType:"checkbox"},{id:"a_respiratory",category:"a",label:"呼吸ケア",points:1,inputType:"checkbox"},{id:"a_infusion",category:"a",label:"点滴ライン同時3本以上の管理",points:1,inputType:"checkbox"},{id:"a_ecg",category:"a",label:"心電図モニターの管理",points:1,inputType:"checkbox"},{id:"a_syringe_driver",category:"a",label:"シリンジポンプの管理",points:1,inputType:"checkbox"},{id:"a_emergency",category:"a",label:"救急搬送後の入院/緊急入院(2日間)",points:2,inputType:"checkbox"},{id:"a_special",category:"a",label:"専門的な治療・処置(抗悪性腫瘍剤等)",points:3,inputType:"checkbox"},{id:"b_bed_mobility",category:"b",label:"寝返り",points:2,inputType:"select",hasAssistance:!1,options:[{label:"できる(0点)",value:0,explanation:"手すり等を使わずに自力で寝返りができる"},{label:"何かにつかまればできる(1点)",value:1,explanation:"柵や介助バーを使用すれば可能"},{label:"できない(2点)",value:2,explanation:"自力では全くできない、または医学的安静で禁止されている"}]},{id:"b_transfer",category:"b",label:"移乗",points:2,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"乗り移り動作が自力で可能、または介助不要"},{label:"一部介助(1点)",value:1,explanation:"見守りや手を添える程度の介助が必要"},{label:"全介助(2点)",value:2,explanation:"抱え上げなど、人的な力が全面的に必要"}]},{id:"b_oral_care",category:"b",label:"口腔清潔",points:1,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"準備から実施まで一人で完結できる"},{label:"要介助(1点)",value:1,explanation:"物品の準備や仕上げ磨きなどに介助が必要"}]},{id:"b_eating",category:"b",label:"食事摂取",points:2,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"配膳された食事を自力で摂取できる"},{label:"一部介助(1点)",value:1,explanation:"小さく刻む、蓋を開ける、一部介助などが必要"},{label:"全介助(2点)",value:2,explanation:"経管栄養を含む、全ての摂取に介助が必要"}]},{id:"b_clothes",category:"b",label:"衣服の着脱",points:2,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"ボタン留め等含め、全て一人で可能"},{label:"一部介助(1点)",value:1,explanation:"背中を整える、靴下を履くなどに介助が必要"},{label:"全介助(2点)",value:2,explanation:"自分では着脱がほとんどできない"}]},{id:"b_instruction",category:"b",label:"診療・療養上の指示が通じる",points:1,inputType:"select",hasAssistance:!1,options:[{label:"はい(0点)",value:0},{label:"いいえ(1点)",value:1}]},{id:"b_danger",category:"b",label:"危険行動",points:2,inputType:"select",hasAssistance:!1,options:[{label:"ない(0点)",value:0},{label:"ある(2点)",value:2}]},{id:"c_thoraco",category:"c",label:"開胸手術(9日間)",points:1,inputType:"checkbox"},{id:"c_laparo",category:"c",label:"開腹手術(6日間)",points:1,inputType:"checkbox"},{id:"c_craniotomy",category:"c",label:"開頭手術(11日間)",points:1,inputType:"checkbox"},{id:"c_other_surgery",category:"c",label:"その他手術(5日間)",points:1,inputType:"checkbox"}],m={ACUTE_GENERAL_5:{id:"acute_general_5",name:"急性期一般入院料5",thresholds:{pattern1:{a:2,b:3},pattern2:{c:1}}}},p="nursing_patients_v5",u="nursing_admissions_v5",y="nursing_assessment_",f=e=>{let t;e.id||(e.id="p"+Math.random().toString(36).substr(2,9));let a=j(),l=a.findIndex(t=>t.id===e.id);return l>=0?(t=[...a])[l]=e:t=[...a,e],localStorage.setItem(p,JSON.stringify(t)),e},v=(e,t)=>{let a=[...N(null).filter(t=>t.patientId!==e),...t.map(t=>({...t,id:t.id.startsWith("temp_")?"adm"+Math.random().toString(36).substr(2,9):t.id,patientId:e}))];localStorage.setItem(u,JSON.stringify(a))},j=()=>{let e=localStorage.getItem(p);return e?JSON.parse(e):[]},N=e=>{let t=localStorage.getItem(u),a=t?JSON.parse(t):[];return null===e?a:a.filter(t=>t.patientId===e)},w=(e,t)=>"".concat(y).concat(e,"_").concat(t);function k(e,t){var a,l,s,r,n,i;let o=0,d=0,c=0,x=t.items||{};g.forEach(e=>{let t=x[e.id];if("a"===e.category)!0===t&&(o+=e.points);else if("c"===e.category)!0===t&&(c+=e.points);else if("b"===e.category&&"number"==typeof t){let a=t;if(e.hasAssistance){let t=x["".concat(e.id,"_assist")];a*="number"==typeof t?t:0}d+=a}});let h=null!=(a=t.scoreA)?a:o,b=null!=(l=t.scoreB)?l:d,p=null!=(s=t.scoreC)?s:c;if(e===m.ACUTE_GENERAL_5.id){let e=m.ACUTE_GENERAL_5.thresholds,t=h>=(null!=(r=e.pattern1.a)?r:0)&&b>=(null!=(n=e.pattern1.b)?n:0),a=p>=(null!=(i=e.pattern2.c)?i:0);return t||a}return console.warn("Unknown admission fee ID: ".concat(e)),!1}let S=e=>{var t;let{item:a,currentValue:r,currentAssistValue:n,onSave:i,onClose:o,position:d}=e,c=(0,s.useRef)(null),[x,h]=s.useState(r),[b,g]=s.useState(null!=n?n:1);(0,s.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);let m={top:d.y,left:d.x,zIndex:1e3};return(0,l.jsxs)("div",{ref:c,className:"fixed bg-white border border-gray-300 shadow-xl rounded-lg p-4 w-80 text-sm animate-in fade-in zoom-in-95 duration-100",style:m,children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3 pb-2 border-b border-gray-100",children:[(0,l.jsx)("h3",{className:"font-bold text-gray-800",children:a.label}),(0,l.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[a.hasAssistance&&(0,l.jsxs)("div",{className:"bg-orange-50 p-2 rounded border border-orange-200 mb-2",children:[(0,l.jsx)("span",{className:"text-xs font-bold text-orange-800 block mb-1",children:"介助の実施"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>g(1),className:"flex-1 py-1 px-2 rounded text-xs border ".concat(1===b?"bg-orange-500 text-white border-orange-600":"bg-white text-gray-600 border-gray-300"),children:"あり (実施)"}),(0,l.jsx)("button",{onClick:()=>g(0),className:"flex-1 py-1 px-2 rounded text-xs border ".concat(0===b?"bg-gray-600 text-white border-gray-700":"bg-white text-gray-600 border-gray-300"),children:"なし (未実施)"})]}),(0,l.jsx)("p",{className:"text-[10px] text-orange-600 mt-1",children:"※「なし」を選択すると、項目の点数は0点になります。"})]}),"checkbox"===a.inputType?(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("button",{onClick:()=>{i(!0),o()},className:"p-3 text-left rounded border transition-colors ".concat(!0===r?"bg-blue-50 border-blue-500 text-blue-800 font-bold":"hover:bg-gray-50 border-gray-200"),children:"あり / 実施 (1点)"}),(0,l.jsx)("button",{onClick:()=>{i(!1),o()},className:"p-3 text-left rounded border transition-colors ".concat(!1===r?"bg-gray-100 border-gray-400 font-bold":"hover:bg-gray-50 border-gray-200"),children:"なし / 未実施 (0点)"}),a.description&&(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.description})]}):(0,l.jsx)("div",{className:"flex flex-col gap-2",children:null==(t=a.options)?void 0:t.map(e=>(0,l.jsxs)("button",{onClick:()=>{i(e.value,a.hasAssistance?b:void 0),o()},className:"p-3 text-left rounded border transition-colors group ".concat(r===e.value?"bg-green-50 border-green-500 ring-1 ring-green-500":"hover:bg-gray-50 border-gray-200"),children:[(0,l.jsx)("div",{className:"flex justify-between items-center",children:(0,l.jsx)("span",{className:"font-bold ".concat(r===e.value?"text-green-800":"text-gray-700"),children:e.label})}),e.explanation&&(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1 group-hover:text-gray-700",children:e.explanation})]},e.value))})]}),(0,l.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-100 text-right",children:(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"値を選択すると確定して閉じます"})})]})},C=o("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),_=o("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),D=o("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),M=o("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),E=o("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),A=e=>{var t,a,r,n;let{patientId:i,currentDate:o,onDateSelect:d,lastUpdated:c,onDirtyChange:x}=e,h=new Date(o),b=h.getFullYear(),m=h.getMonth()+1,p="".concat(b,"-").concat(String(m).padStart(2,"0")),u=Array.from({length:new Date(b,m,0).getDate()},(e,t)=>"".concat(b,"-").concat(String(m).padStart(2,"0"),"-").concat(String(t+1).padStart(2,"0"))),[f,v]=(0,s.useState)({});(0,s.useEffect)(()=>{v(((e,t)=>{let a={},l="".concat(y).concat(e,"_").concat(t);for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);if(t&&t.startsWith(l)){let e=localStorage.getItem(t);if(e){let t=JSON.parse(e);a[t.date]=t}}}return a})(i,p))},[i,p,c]);let j=(0,s.useMemo)(()=>{let e={a:[],b:[],c:[]};return g.forEach(t=>{e[t.category]&&e[t.category].push(t)}),e},[]),[N,A]=(0,s.useState)(null),[I,T]=(0,s.useState)({}),[z,O]=(0,s.useState)(null),L=Object.keys(I).length>0||!!N;(0,s.useEffect)(()=>{null==x||x(L);let e=e=>{L&&(e.preventDefault(),e.returnValue="")};return L&&window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[L,x]),(0,s.useEffect)(()=>{A(null),T({}),O(null)},[i]);let[F,R]=(0,s.useState)({isOpen:!1,item:null,position:{x:0,y:0}}),V=(0,s.useMemo)(()=>[...j.a,...j.b,...j.c],[j]),W=(e,t)=>{let a=0,l=0,s=0;return g.forEach(t=>{let r=e[t.id];if("a"===t.category&&!0===r&&(a+=t.points),"c"===t.category&&!0===r&&(s+=t.points),"b"===t.category&&"number"==typeof r){let a=r;if(t.hasAssistance){let l=e["".concat(t.id,"_assist")];a*="number"==typeof l?l:1}l+=a}}),{items:e,scoreA:a,scoreB:l,scoreC:s}},H=()=>{confirm("編集中の内容を破棄しますか？")&&(A(null),T({}),O(null),R({isOpen:!1,item:null,position:{x:0,y:0}}))},q=()=>{let e=Object.keys(I);e.forEach(e=>{(e=>{let t=w(e.patientId,e.date);localStorage.setItem(t,JSON.stringify(e))})(I[e])}),v(t=>{let a={...t};return e.forEach(e=>{a[e]=I[e]}),a}),A(null),T({}),O(null),O(null)};(0,s.useEffect)(()=>{if(!N||!z)return void R(e=>({...e,isOpen:!1}));let e=g.find(e=>e.id===z);if(!e)return;let t=document.querySelector('[data-cell-date="'.concat(N,'"][data-cell-item="').concat(z,'"]'));if(t){let a=t.getBoundingClientRect(),l=a.right+10,s=a.top+window.scrollY;l+320>window.innerWidth&&(l=a.left-320-10),R({isOpen:!0,item:e,position:{x:l,y:s}}),t.scrollIntoView({behavior:"smooth",block:"nearest"})}},[z,N]),(0,s.useEffect)(()=>{if(!N)return;let e=e=>{if(!e.metaKey&&!e.ctrlKey){if("ArrowDown"===e.key||"Enter"===e.key||"Tab"===e.key)e.preventDefault(),U(1);else if("ArrowUp"===e.key)e.preventDefault(),U(-1);else if(["0","1","2"].includes(e.key)&&z){let t=g.find(e=>e.id===z);if(t){let a=parseInt(e.key);if(e.preventDefault(),t.options){if(t.options.find(e=>e.value===a))return void J(t,a)}else if("checkbox"===t.inputType){1===a&&J(t,!0),0===a&&J(t,!1);return}}}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[N,z,I,V]);let U=e=>{if(!z)return;let t=V.findIndex(e=>e.id===z);if(-1===t)return;let a=t+e;a>=0&&a<V.length&&O(V[a].id)},J=(e,t)=>{B(t,1),U(1)},B=(e,t)=>{if(!N||!I[N]||!z||!g.find(e=>e.id===z))return;let a=I[N],l={...a.items,[z]:e};"number"==typeof t&&(l["".concat(z,"_assist")]=t);let s=0,r=0,n=0;g.forEach(e=>{let t=l[e.id];if("a"===e.category&&!0===t&&(s+=e.points),"c"===e.category&&!0===t&&(n+=e.points),"b"===e.category&&"number"==typeof t){let a=t;if(e.hasAssistance){let t=l["".concat(e.id,"_assist")];a*="number"==typeof t?t:1}r+=a}});let i=k(a.admissionFeeId,{items:l,scoreA:s,scoreB:r,scoreC:n});T(e=>({...e,[N]:{...a,items:l,scores:{a:s,b:r,c:n},isSevere:i}}))};return(0,l.jsxs)("div",{className:"flex flex-col bg-white rounded-lg shadow mb-6 border border-gray-200 w-full overflow-hidden",children:[(0,l.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:(0,l.jsxs)("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:["月間評価推移 (",b,"年",m,"月)",N&&(0,l.jsxs)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded flex items-center gap-1",children:[(0,l.jsx)(C,{className:"w-3 h-3"})," 編集中: ",N]})]})}),(0,l.jsx)("div",{className:"w-full overflow-x-auto max-h-[80vh]",children:(0,l.jsxs)("table",{className:"w-full text-xs text-center border-separate border-spacing-0",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-2 border border-gray-300 min-w-[300px] text-left bg-gray-100 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] outline outline-1 outline-gray-300",style:{position:"sticky",top:0,left:0,zIndex:60,background:"#f3f4f6"},children:"項目 / 日付"}),u.map((e,t)=>{let a=parseInt(e.split("-")[2]),s=e===o,r=e===N,n=new Date,c=e>"".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0")),x=I[e],h=f[e],b=x||h,g=null==b?void 0:b.isSevere;return(0,l.jsx)("th",{className:"\n                      p-2 border border-gray-300 min-w-[60px] transition-colors relative group\n                      ".concat(r?"bg-yellow-50 border-yellow-400 border-2 border-b-0":"","\n                      ").concat(!r&&s?"bg-blue-600 text-white":"","\n                      ").concat(!r&&!s?"bg-gray-100 hover:bg-gray-200":"","\n                      ").concat(!r&&g?"bg-pink-100 text-red-800":"","\n                      ").concat(c?"bg-gray-50 cursor-not-allowed":"","\n                    "),style:{position:"sticky",top:0,zIndex:50},onClick:()=>!r&&!c&&d(e),children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-1 ".concat(c?"opacity-50":""),children:[(0,l.jsx)("span",{children:a}),r?(0,l.jsxs)("div",{className:"flex gap-1 z-50 relative items-center",children:[(0,l.jsx)("button",{onClick:q,className:"p-1 bg-green-500 text-white rounded hover:bg-green-600",title:"保存",children:(0,l.jsx)(_,{className:"w-3 h-3"})}),(0,l.jsx)("button",{onClick:H,className:"p-1 bg-gray-500 text-white rounded hover:bg-gray-600",title:"キャンセル",children:(0,l.jsx)(D,{className:"w-3 h-3"})})]}):(0,l.jsxs)("div",{className:"h-5 flex gap-1 items-center justify-center",children:[t>0&&!f[e]&&!c&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{let t=u.indexOf(e);if(t<=0)return alert("前日のデータがありません");let a=f[u[t-1]];if(!a)return alert("前日のデータが登録されていません");if(N&&N!==e&&!confirm("他の日の編集を破棄してこの日を編集しますか？"))return;let l={...a.items},{scoreA:s,scoreB:r,scoreC:n}=W(l,a.admissionFeeId),o={patientId:i,date:e,items:l,admissionFeeId:a.admissionFeeId,scores:{a:s,b:r,c:n},isSevere:k(a.admissionFeeId,{items:l,scoreA:s,scoreB:r,scoreC:n})};T({[e]:o}),A(e),V.length>0&&O(V[0].id)})(e)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"前日のデータをコピーして編集",children:(0,l.jsx)(M,{className:"w-3 h-3"})}),!c&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{if(N&&N!==e&&!confirm("他の日の編集を破棄してこの日を編集しますか？"))return;let t=f[e],a=(null==t?void 0:t.admissionFeeId)||"acute_general_5",{items:l,scoreA:s,scoreB:r,scoreC:n}=W((null==t?void 0:t.items)?{...t.items}:{},a),o={patientId:i,date:e,items:l,admissionFeeId:a,scores:{a:s,b:r,c:n},isSevere:k(a,{items:l,scoreA:s,scoreB:r,scoreC:n})};T({[e]:o}),A(e),V.length>0&&O(V[0].id)})(e)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"編集",children:(0,l.jsx)(C,{className:"w-3 h-3"})})]}),!!x&&!r&&(0,l.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]})},e)})]})}),(0,l.jsxs)("tbody",{children:[(()=>{let e=e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"p-2 border border-gray-300 text-left bg-white truncate max-w-[300px] shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] outline outline-1 outline-gray-300",title:e.label,style:{position:"sticky",left:0,zIndex:40,background:"white"},children:e.label}),u.map((t,a)=>{var s,r,n,i,c,x,h,b,g;let m=t===N,p=I[t],u=f[t],y=p||u,v=null==y||null==(s=y.items)?void 0:s[e.id],j="";"checkbox"===e.inputType?!0===v&&(j=(0,l.jsx)("span",{className:"text-blue-600 font-bold",children:"●"})):"number"==typeof v&&(j=v);let w=!1;if(p){let t="checkbox"!==e.inputType&&0;(null!=(i=null==(r=p.items)?void 0:r[e.id])?i:t)!==(null!=(c=null==u||null==(n=u.items)?void 0:n[e.id])?c:t)&&(w=!0),!w&&"b"===e.category&&e.hasAssistance&&(null!=(b=null==(x=p.items)?void 0:x["".concat(e.id,"_assist")])?b:1)!==(null!=(g=null==u||null==(h=u.items)?void 0:h["".concat(e.id,"_assist")])?g:1)&&(w=!0)}let k=m&&z===e.id;return(0,l.jsxs)("td",{"data-cell-date":t,"data-cell-item":e.id,className:"\n                            border border-gray-300 relative\n                            ".concat(m?"cursor-pointer":"","\n                            ").concat(m&&!k?"bg-white hover:bg-yellow-50":"","\n                            ").concat(k?"bg-yellow-200 outline outline-2 outline-blue-500 z-10":""," \n                            ").concat(m?"border-yellow-400 border-x-2":"","\n                            ").concat(!m&&(null==y?void 0:y.isSevere)?"bg-pink-50":"","\n                          "),onClick:a=>m&&((e,t,a)=>{if(N!==t){t!==o&&d(t);return}O(a.id)})(0,t,e),children:[j,w&&(0,l.jsx)("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]},t)})]},e.id),t=(e,t,a)=>(0,l.jsxs)("tr",{className:"".concat(a," font-bold"),children:[(0,l.jsx)("td",{className:"".concat(a," p-2 border shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]"),style:{position:"sticky",left:0,zIndex:40},children:e}),u.map((e,a)=>{var s,r;let n=I[e],i=f[e],o=n||i,d=e===N;return(0,l.jsx)("td",{className:"border ".concat(d?"bg-yellow-50 border-yellow-400 border-x-2":""," ").concat(!d&&(null==o?void 0:o.isSevere)?"bg-pink-50":""),children:null!=(r=null==o||null==(s=o.scores)?void 0:s[t])?r:"-"},e)})]});return(0,l.jsxs)(l.Fragment,{children:[t("A項目 (得点)","a","bg-blue-50"),j.a.map(e),t("B項目 (得点)","b","bg-green-50"),j.b.map(e),t("C項目 (得点)","c","bg-gray-100"),j.c.map(e)]})})(),(0,l.jsxs)("tr",{className:"bg-gray-800 text-white font-bold",children:[(0,l.jsx)("td",{className:"p-2 border border-gray-600 text-left bg-gray-800 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] outline outline-1 outline-gray-600",style:{position:"sticky",left:0,zIndex:40,background:"#1f2937",color:"white"},children:"判定結果"}),u.map((e,t)=>{let a=I[e],s=f[e],r=a||s;return r?e===N?(0,l.jsx)("td",{className:"border border-gray-600 bg-gray-700",children:(0,l.jsx)("button",{onClick:()=>(e=>{confirm("".concat(e," のデータを削除しますか？"))&&(((e,t)=>{let a=w(e,t);localStorage.removeItem(a)})(i,e),v(t=>{let a={...t};return delete a[e],a}),N===e&&H())})(e),className:"text-red-400 hover:text-red-200 p-1",title:"データを削除",children:(0,l.jsx)(E,{className:"w-4 h-4"})})},e):(0,l.jsx)("td",{className:"border border-gray-600 ".concat(r.isSevere?"bg-red-600":"bg-gray-700"),children:r.isSevere?"○":"\xd7"},e):(0,l.jsx)("td",{className:"border border-gray-600 bg-gray-100"},e)})]})]})]})}),F.isOpen&&F.item&&I[N]&&(0,l.jsx)(S,{item:F.item,currentValue:null==(a=I[N])||null==(t=a.items)?void 0:t[F.item.id],currentAssistValue:null==(n=I[N])||null==(r=n.items)?void 0:r["".concat(F.item.id,"_assist")],onSave:B,onClose:()=>R(e=>({...e,isOpen:!1})),position:F.position})]})},I=o("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),T=()=>{let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)({}),[n,i]=(0,s.useState)(""),[o,d]=(0,s.useState)(""),[c,x]=(0,s.useState)(256),[h,b]=(0,s.useState)(!1),[g,m]=(0,s.useState)(0),[y,f]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=e=>{h&&x(Math.max(200,Math.min(600,e.clientX)))},t=()=>b(!1);return h&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[h]),(0,s.useEffect)(()=>{let e=new Date;d("".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))),(()=>{let e=localStorage.getItem(p);if(e)return JSON.parse(e);{let{patients:e,admissions:t}=(()=>{let e=[],t=[];for(let a=1;a<=60;a++){let l=String(a).padStart(3,"0"),s=a%2==0,r=1940+a%50,n=String(a%12+1).padStart(2,"0"),i=String(a%28+1).padStart(2,"0"),o="".concat(r,"-").concat(n,"-").concat(i),d=String((a+3)%12+1).padStart(2,"0"),c=String((a+5)%28+1).padStart(2,"0"),x="2024-".concat(d,"-").concat(c),h=["西病棟","東病棟","南病棟"][a%3],b="".concat(a%5+1,"0").concat(a%10),g=a%5==0,m=a%7==0,p=a%8==0;!function(a,l,s,r,n,i){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],x="p".concat(a);e.push({id:x,identifier:"100".concat(a),name:l,gender:s,birthDate:r,postalCode:"100-0001",address:"東京都千代田区千代田1-1",memo:d?"入退院を繰り返しています":o?"退院済み":"",excludeFromAssessment:c}),d&&t.push({id:"adm".concat(a,"_past"),patientId:x,admissionDate:"2023-01-10",dischargeDate:"2023-02-15",initialWard:"東病棟",initialRoom:"201"}),t.push({id:"adm".concat(a),patientId:x,admissionDate:n,dischargeDate:o?"2024-05-20":void 0,initialWard:"一般病棟",initialRoom:i})}(l,"ダミー 患者".concat(a),s?"2":"1",o,x,b,g,m,p),t.length>0&&(t[t.length-1].initialWard=h)}return{patients:e,admissions:t}})();return localStorage.setItem(p,JSON.stringify(e)),localStorage.setItem(u,JSON.stringify(t))}})();let a=j();t(a);let l={};a.forEach(e=>{l[e.id]=N(e.id)}),r(l),a.length>0&&i(a[0].id)},[]),(0,l.jsxs)("div",{className:"flex flex-1 h-full overflow-hidden bg-gray-100 relative",children:[(0,l.jsxs)("div",{className:"bg-white border-r border-gray-200 flex flex-col shrink-0 relative group",style:{width:c},children:[(0,l.jsx)("div",{className:"absolute right-0 top-0 h-full w-4 cursor-col-resize z-50 flex flex-col justify-start pt-32 items-center -mr-2 select-none",onMouseDown:e=>{e.preventDefault(),b(!0)},children:(0,l.jsx)("div",{className:"w-1.5 h-16 bg-gray-300 rounded-full transition-colors hover:bg-gray-500 shadow-sm"})}),(0,l.jsx)("div",{className:"p-4 border-b border-gray-200 bg-blue-50",children:(0,l.jsxs)("h1",{className:"text-lg font-bold text-blue-800 flex items-center gap-2",children:[(0,l.jsx)(I,{className:"w-5 h-5"})," 患者一覧"]})}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:e.map(e=>{let t=(a[e.id]||[]).sort((e,t)=>t.admissionDate.localeCompare(e.admissionDate))[0],s=t&&(!t.dischargeDate||t.dischargeDate>=o),r=t?"".concat(t.admissionDate," 入院"):"未入院";return(0,l.jsxs)("button",{onClick:()=>(e=>{n!==e&&(!y||confirm("編集中のデータがあります。破棄して別の患者へ移動しますか？"))&&(i(e),f(!1))})(e.id),className:"w-full text-left p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ".concat(n===e.id?"bg-blue-100 border-l-4 border-l-blue-600":""),children:[(0,l.jsxs)("div",{className:"font-bold text-gray-800",children:[e.name," ",(0,l.jsxs)("span",{className:"text-xs font-normal text-gray-500",children:["(",e.identifier,")"]})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["1"===e.gender?"男性":"女性"," / ",e.birthDate,"生 / ",(0,l.jsx)("span",{className:s?"text-blue-600 font-bold":"",children:r})]})]},e.id)})}),(0,l.jsx)("div",{className:"p-4 border-t border-gray-200 text-xs text-gray-400 text-center",children:"Nursing Assessment System v1.1"})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 flex flex-col gap-4",children:n&&o&&(0,l.jsx)("section",{className:"w-full min-w-0",children:(0,l.jsx)(A,{patientId:n,currentDate:o,onDateSelect:d,lastUpdated:g,onDirtyChange:f})})})]})},z=o("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),O=o("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),L=o("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),F=()=>(0,l.jsxs)("div",{className:"p-8 h-full bg-gray-50 overflow-y-auto",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"ダッシュボード (当月統計)"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,l.jsx)(R,{title:"入院患者数",value:"42",subtext:"前月比 +3",icon:c,color:"blue"}),(0,l.jsx)(R,{title:"重症度該当率",value:"38%",subtext:"目標: 35%以上",icon:z,color:"green"}),(0,l.jsx)(R,{title:"A項目 2点以上",value:"15",subtext:"平均推移: 横ばい",icon:O,color:"purple"}),(0,l.jsx)(R,{title:"未評価アラート",value:"2",subtext:"要確認",icon:L,color:"red"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 h-64 flex items-center justify-center text-gray-400",children:"[重症度推移グラフ エリア]"}),(0,l.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 h-64 flex items-center justify-center text-gray-400",children:"[病棟別訳あり患者分布 エリア]"})]})]}),R=e=>{let{title:t,value:a,subtext:s,icon:r,color:n}=e;return(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:t}),(0,l.jsx)("h3",{className:"text-3xl font-bold text-gray-800 mt-1",children:a})]}),(0,l.jsx)("div",{className:"p-3 rounded-full ".concat({blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",red:"bg-red-100 text-red-600"}[n]),children:(0,l.jsx)(r,{className:"w-6 h-6"})})]}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:s})]})},V=()=>(0,l.jsxs)("div",{className:"p-8 h-full bg-gray-50 flex flex-col items-center justify-center text-gray-400",children:[(0,l.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,l.jsx)(x,{className:"w-12 h-12"})}),(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-600",children:"病棟・病室管理"}),(0,l.jsx)("p",{className:"mt-2",children:"この機能は現在開発中です (Phase 2)"})]}),W=o("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),H=o("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),q=o("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),U=o("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),J=o("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),B=o("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),P=o("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Y=o("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),G=e=>{let{initialPatient:t,initialAdmissions:a=[],onSave:r,onCancel:n}=e,[i,o]=(0,s.useState)((null==t?void 0:t.identifier)||""),[d,c]=(0,s.useState)((null==t?void 0:t.name)||""),[x,h]=(0,s.useState)((null==t?void 0:t.gender)||"1"),[b,g]=(0,s.useState)((null==t?void 0:t.birthDate)||""),[m,p]=(0,s.useState)((null==t?void 0:t.postalCode)||""),[u,y]=(0,s.useState)((null==t?void 0:t.address)||""),[f,v]=(0,s.useState)((null==t?void 0:t.memo)||""),[j,N]=(0,s.useState)((null==t?void 0:t.excludeFromAssessment)||!1),[w,k]=(0,s.useState)(a),[S,C]=(0,s.useState)(!1),D=["101","102","103","105","106","201","202","203","205","206","301","302","303","305","306","西101","西102","東101","東102"],M=i&&d&&b,A=async()=>{if(!m||m.length<7)return void alert("7桁の郵便番号を入力してください");C(!0);try{let e=await fetch("https://zipcloud.ibsnet.co.jp/api/search?zipcode=".concat(m)),t=await e.json();if(t.results){let e=t.results[0],a="".concat(e.address1).concat(e.address2).concat(e.address3);y(a)}else alert("住所が見つかりませんでした")}catch(e){console.error(e),alert("住所検索に失敗しました")}finally{C(!1)}},T=(e,t,a)=>{k(w.map(l=>l.id===e?{...l,[t]:a}:l))};return(0,l.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 text-lg",children:[(0,l.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center shrink-0 shadow-sm",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:(null==t?void 0:t.id)?"患者情報の編集":"新規患者登録"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:n,className:"px-6 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-100 font-bold",children:"キャンセル"}),(0,l.jsxs)("button",{onClick:()=>{if(!M)return;let e={id:(null==t?void 0:t.id)||"",identifier:i,name:d,gender:x,birthDate:b,postalCode:m,address:u,memo:f,excludeFromAssessment:j};r(e,w)},disabled:!M,className:"px-6 py-2 rounded-lg text-white font-bold flex items-center gap-2\n                    ".concat(M?"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed","\n                "),children:[(0,l.jsx)(_,{className:"w-5 h-5"})," 保存する"]})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,l.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2 border-b pb-4",children:[(0,l.jsx)(I,{className:"w-6 h-6 text-gray-500"})," 基本情報"]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:["患者ID ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono",placeholder:"例: 10001"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:["氏名 ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"例: 山田 太郎"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"性別"}),(0,l.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1 w-fit",children:[{val:"1",label:"男性"},{val:"2",label:"女性"},{val:"3",label:"その他"}].map(e=>(0,l.jsx)("button",{onClick:()=>h(e.val),className:"px-6 py-2 rounded-md font-bold transition-all ".concat(x===e.val?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:e.label},e.val))})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:["生年月日 ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"date",value:b,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,l.jsx)("div",{className:"md:col-span-2 border-t border-gray-100 my-2"}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"評価対象区分"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("button",{onClick:()=>N(!1),className:"flex-1 py-4 px-6 rounded-lg border-2 font-bold flex items-center justify-center gap-3 transition-all\n                                    ".concat(j?"border-gray-200 text-gray-400 hover:border-gray-300":"border-blue-500 bg-blue-50 text-blue-700","\n                                "),children:[(0,l.jsx)(z,{className:"w-5 h-5"})," 評価対象"]}),(0,l.jsxs)("button",{onClick:()=>N(!0),className:"flex-1 py-4 px-6 rounded-lg border-2 font-bold flex items-center justify-center gap-3 transition-all\n                                    ".concat(j?"border-red-500 bg-red-50 text-red-700":"border-gray-200 text-gray-400 hover:border-gray-300","\n                                "),children:[(0,l.jsx)(q,{className:"w-5 h-5"})," 評価対象外"]})]}),j&&(0,l.jsx)("p",{className:"mt-2 text-red-600 text-sm font-bold pl-1",children:"※ この患者は看護必要度評価の対象から除外されます（集計に含まれません）。"})]}),(0,l.jsx)("div",{className:"md:col-span-2 border-t border-gray-100 my-2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"郵便番号"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono",placeholder:"1000001",maxLength:8}),(0,l.jsx)("button",{onClick:A,disabled:S,className:"bg-gray-800 text-white px-4 py-2 rounded-lg font-bold hover:bg-gray-700 whitespace-nowrap shadow-sm",children:S?"...":"住所検索"})]})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"住所"}),(0,l.jsx)("input",{type:"text",value:u,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"東京都千代田区..."})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"メモ"}),(0,l.jsx)("textarea",{value:f,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none h-24",placeholder:"特記事項があれば入力してください"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,l.jsx)(z,{className:"w-6 h-6 text-gray-500"})," 入院歴"]}),(0,l.jsxs)("button",{onClick:()=>{k([...w,{id:"temp_".concat(Date.now()),patientId:(null==t?void 0:t.id)||"",admissionDate:new Date().toISOString().split("T")[0],initialWard:"一般病棟",initialRoom:""}])},className:"text-blue-600 font-bold hover:bg-blue-50 px-3 py-1 rounded transition-colors flex items-center gap-1",children:[(0,l.jsx)(W,{className:"w-5 h-5"})," 入院追加"]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[0===w.length&&(0,l.jsx)("div",{className:"text-center py-8 text-gray-400 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:"入院履歴がありません"}),w.map((e,t)=>(0,l.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg border border-gray-200 relative group",children:[(0,l.jsx)("button",{onClick:()=>{var t;return t=e.id,void k(w.filter(e=>e.id!==t))},className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors p-2",title:"削除",children:(0,l.jsx)(E,{className:"w-5 h-5"})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pr-10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"入院日"}),(0,l.jsx)("input",{type:"date",value:e.admissionDate,onChange:t=>T(e.id,"admissionDate",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded bg-white"})]}),(0,l.jsx)("span",{className:"text-gray-400 pt-5",children:"〜"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"退院日 (空欄で入院中)"}),(0,l.jsx)("input",{type:"date",value:e.dischargeDate||"",onChange:t=>T(e.id,"dischargeDate",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded bg-white"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"入院時病棟"}),(0,l.jsxs)("select",{value:e.initialWard||"",onChange:t=>T(e.id,"initialWard",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded bg-white",children:[(0,l.jsx)("option",{value:"",children:"選択..."}),(0,l.jsx)("option",{value:"一般病棟",children:"一般病棟"}),(0,l.jsx)("option",{value:"西病棟",children:"西病棟"}),(0,l.jsx)("option",{value:"東病棟",children:"東病棟"}),(0,l.jsx)("option",{value:"南病棟",children:"南病棟"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"入院時病室"}),(0,l.jsxs)("select",{value:e.initialRoom||"",onChange:t=>T(e.id,"initialRoom",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded bg-white",children:[(0,l.jsx)("option",{value:"",children:"選択..."}),D.map(e=>(0,l.jsxs)("option",{value:e,children:[e,"号室"]},e))]})]})]})]})]},e.id))]})]})]})})]})},K=e=>{let{patient:t,admissions:a,onBack:r,onUpdate:n,onEditingChange:i}=e,[o,d]=(0,s.useState)("basic"),[c,x]=(0,s.useState)(new Date().toISOString().split("T")[0]),[h,b]=(0,s.useState)(!1);return((0,s.useEffect)(()=>(null==i||i(h),()=>null==i?void 0:i(!1)),[h,i]),h)?(0,l.jsx)(G,{initialPatient:t,initialAdmissions:a,onSave:(e,t)=>{f(e),v(e.id,t),b(!1),n&&n()},onCancel:()=>b(!1)}):(0,l.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 text-lg",children:[" ",(0,l.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center gap-4 shrink-0 shadow-sm",children:[(0,l.jsx)("button",{onClick:r,className:"p-3 hover:bg-gray-100 rounded-full transition-colors",children:(0,l.jsx)(P,{className:"w-6 h-6 text-gray-600"})}),(0,l.jsx)("div",{children:(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[t.name,(0,l.jsxs)("span",{className:"text-lg font-normal text-gray-500",children:["(",t.identifier,")"]}),t.excludeFromAssessment&&(0,l.jsx)("span",{className:"bg-red-100 text-red-700 text-sm px-3 py-1 rounded-full font-bold",children:"評価対象外"})]})})]}),(0,l.jsxs)("div",{className:"px-6 pt-4 flex gap-2 border-b border-gray-200 shrink-0",children:[(0,l.jsxs)("button",{onClick:()=>d("basic"),className:"px-6 py-3 text-lg font-bold rounded-t-lg flex items-center gap-2 border-t border-l border-r border-transparent\n              ".concat("basic"===o?"bg-white text-blue-600 border-gray-200 border-b-white translate-y-[1px]":"text-gray-500 hover:text-gray-700 hover:bg-gray-100","\n            "),children:[(0,l.jsx)(I,{className:"w-5 h-5"})," 基本情報・入院歴"]}),(0,l.jsxs)("button",{onClick:()=>d("matrix"),className:"px-6 py-3 text-lg font-bold rounded-t-lg flex items-center gap-2 border-t border-l border-r border-transparent\n              ".concat("matrix"===o?"bg-white text-blue-600 border-gray-200 border-b-white translate-y-[1px]":"text-gray-500 hover:text-gray-700 hover:bg-gray-100","\n            "),children:[(0,l.jsx)(z,{className:"w-5 h-5"})," 看護必要度マトリクス"]})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto p-8",children:["basic"===o&&(0,l.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,l.jsx)(Y,{className:"w-6 h-6"})," 患者基本情報"]}),(0,l.jsx)("button",{onClick:()=>b(!0),className:"text-blue-600 font-bold hover:underline text-lg",children:"編集する"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"患者ID"}),(0,l.jsx)("p",{className:"font-mono text-xl text-gray-800",children:t.identifier})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"氏名"}),(0,l.jsx)("p",{className:"text-xl text-gray-800",children:t.name})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"性別"}),(0,l.jsx)("p",{className:"text-xl text-gray-800",children:"1"===t.gender?"男性":"2"===t.gender?"女性":"その他"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"生年月日"}),(0,l.jsx)("p",{className:"text-xl text-gray-800",children:t.birthDate})]}),(0,l.jsx)("div",{className:"col-span-2 border-t border-gray-100 my-2"}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"評価対象区分"}),(0,l.jsx)("div",{className:"mt-1",children:t.excludeFromAssessment?(0,l.jsxs)("span",{className:"flex items-center gap-2 text-red-600 font-bold text-xl",children:[(0,l.jsx)(q,{className:"w-5 h-5 fill-red-100"})," 評価対象外"]}):(0,l.jsx)("span",{className:"text-xl text-gray-800",children:"評価対象"})})]}),(0,l.jsx)("div",{className:"col-span-2 border-t border-gray-100 my-2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"郵便番号"}),(0,l.jsx)("p",{className:"text-xl text-gray-800 font-mono",children:t.postalCode||"-"})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"住所"}),(0,l.jsx)("p",{className:"text-xl text-gray-800",children:t.address||"-"})]}),(0,l.jsx)("div",{className:"col-span-2 border-t border-gray-100 my-2"}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"患者メモ"}),(0,l.jsx)("p",{className:"text-xl text-gray-800 whitespace-pre-wrap leading-relaxed",children:t.memo||"特記事項なし"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,l.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,l.jsx)(z,{className:"w-6 h-6"})," 入院歴"]})}),a.length>0?(0,l.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,l.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg border border-gray-200",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-2 mb-2",children:[(0,l.jsxs)("div",{className:"text-xl font-bold text-gray-800 font-mono",children:[e.admissionDate," ",(0,l.jsx)("span",{className:"text-gray-400 mx-2",children:"〜"})," ",e.dischargeDate||"継続中"]}),!e.dischargeDate&&(0,l.jsx)("span",{className:"bg-green-100 text-green-700 font-bold px-3 py-1 rounded text-base inline-block text-center",children:"入院中"})]}),(0,l.jsxs)("div",{className:"text-lg text-gray-600",children:["開始病棟: ",(0,l.jsx)("span",{className:"font-semibold",children:e.initialWard||"-"})," / ",(0,l.jsx)("span",{className:"font-semibold",children:e.initialRoom||"-"}),"号室"]})]},e.id))}):(0,l.jsx)("p",{className:"text-gray-400 text-lg",children:"入院歴はありません"})]})]}),"matrix"===o&&(0,l.jsx)("div",{className:"h-full bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,l.jsx)(A,{patientId:t.id,currentDate:c,onDateSelect:x})})]})]})},X=e=>{let{onEditingChange:t}=e,[a,r]=(0,s.useState)([]),[n,i]=(0,s.useState)({}),[o,d]=(0,s.useState)(null),[x,h]=(0,s.useState)(""),[b,g]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[u,y]=(0,s.useState)(""),[w,k]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1),[_,D]=(0,s.useState)(null);(0,s.useEffect)(()=>{null==t||t(S)},[S,t]);let[M,E]=(0,s.useState)(1);(0,s.useEffect)(()=>{let e=j();r(e);let t={};e.forEach(e=>{t[e.id]=N(e.id)}),i(t)},[]);let A=(0,s.useMemo)(()=>a.filter(e=>!!(e.name.includes(x)||e.identifier&&e.identifier.includes(x))&&(!b||e.birthDate===b)&&(!m&&!u||!!(n[e.id]||[]).some(e=>{let t=e.admissionDate,a=e.dischargeDate||"9999-12-31",l=m||"0000-01-01";return t<=(u||"9999-12-31")&&a>=l}))&&(!w||!!e.excludeFromAssessment)).sort((e,t)=>t.id.localeCompare(e.id)),[a,x,b,m,u,w,n]),I=Math.ceil(A.length/20),T=(0,s.useMemo)(()=>{let e=(M-1)*20;return A.slice(e,e+20)},[M,A]),z=(e,t)=>{e(t),E(1)};return S&&_?(0,l.jsx)(G,{initialPatient:_,onSave:(e,t)=>{f(e),v(e.id,t),r(j());let a={};j().forEach(e=>{a[e.id]=N(e.id)}),i(a),C(!1),D(null)},onCancel:()=>{C(!1),D(null)}}):o?(0,l.jsx)(K,{patient:o,admissions:n[o.id]||[],onEditingChange:t,onBack:()=>d(null),onUpdate:()=>{r(j());let e={};j().forEach(t=>{e[t.id]=N(t.id)}),i(e)}}):(0,l.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 text-lg",children:[(0,l.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center shrink-0",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[(0,l.jsx)(c,{className:"w-8 h-8 text-blue-600"}),"患者管理"]}),(0,l.jsxs)("button",{onClick:()=>{let e=j(),t=0;e.forEach(e=>{let a=parseInt(e.identifier,10);!isNaN(a)&&a>t&&(t=a)}),D({id:"",identifier:String(t+1).padStart(5,"0"),name:"",gender:"1",birthDate:"",postalCode:"",address:"",memo:"",excludeFromAssessment:!1}),C(!0)},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 shadow-sm transition-colors flex items-center gap-2 font-bold text-lg",children:[(0,l.jsx)(W,{className:"w-5 h-5"})," 新規患者登録"]})]}),(0,l.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex flex-wrap gap-4 items-end shrink-0 shadow-sm",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"キーワード検索"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(H,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,l.jsx)("input",{type:"text",placeholder:"氏名・ID...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md w-64 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",value:x,onChange:e=>z(h,e.target.value)})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"生年月日"}),(0,l.jsx)("input",{type:"date",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",value:b,onChange:e=>z(g,e.target.value)})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"入院期間 (開始)"}),(0,l.jsx)("input",{type:"date",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",value:m,onChange:e=>z(p,e.target.value)})]}),(0,l.jsx)("span",{className:"text-gray-400 mt-8",children:"〜"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"入院期間 (終了)"}),(0,l.jsx)("input",{type:"date",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",value:u,onChange:e=>z(y,e.target.value)})]})]}),(0,l.jsx)("div",{className:"pb-3 pl-4",children:(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500",checked:w,onChange:e=>z(k,e.target.checked)}),(0,l.jsx)("span",{className:"text-lg font-bold text-gray-700",children:"評価対象外のみ"})]})})]}),(0,l.jsx)("div",{className:"p-6 flex-1 overflow-auto",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b border-gray-200 text-lg",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"患者ID"}),(0,l.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"氏名"}),(0,l.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"性別"}),(0,l.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"生年月日"}),(0,l.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"対象外"}),(0,l.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"メモ"}),(0,l.jsx)("th",{className:"px-6 py-4 min-w-[300px]",children:"最新の入院歴"})]})}),(0,l.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[T.map(e=>{let t=(n[e.id]||[]).sort((e,t)=>t.admissionDate.localeCompare(e.admissionDate))[0],a=t?"".concat(t.admissionDate," 〜 ").concat(t.dischargeDate||"入院中"):"記録なし",s=t?"".concat(t.initialWard||"-"," / ").concat(t.initialRoom||"-"):"-";return(0,l.jsxs)("tr",{onClick:()=>d(e),className:"hover:bg-blue-50 transition-colors cursor-pointer group text-xl",children:[(0,l.jsx)("td",{className:"px-6 py-4 font-mono text-gray-600 text-center",children:e.identifier}),(0,l.jsx)("td",{className:"px-6 py-4 font-bold text-gray-800 text-center",children:e.name}),(0,l.jsx)("td",{className:"px-6 py-4 text-gray-600 text-center",children:"1"===e.gender?"男性":"2"===e.gender?"女性":"その他"}),(0,l.jsx)("td",{className:"px-6 py-4 text-gray-600 font-mono text-center",children:e.birthDate}),(0,l.jsx)("td",{className:"px-6 py-4 text-center",children:e.excludeFromAssessment&&(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(q,{className:"w-6 h-6 text-red-500 fill-red-100"})})}),(0,l.jsx)("td",{className:"px-6 py-4 text-gray-500 text-lg max-w-xs truncate text-center",children:e.memo||"-"}),(0,l.jsx)("td",{className:"px-6 py-4",children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:"font-medium text-gray-700 flex items-center gap-2",children:[(0,l.jsx)(U,{className:"w-5 h-5 text-gray-400"})," ",a]}),(0,l.jsxs)("div",{className:"text-base text-gray-500 mt-1 ml-7",children:["病棟: ",s]})]})})]},e.id)}),0===T.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 text-lg",children:"条件に一致する患者が見つかりません"})})]})]}),(0,l.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["全 ",A.length," 件中 ",Math.min((M-1)*20+1,A.length)," - ",Math.min(20*M,A.length)," 件を表示"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>E(e=>Math.max(1,e-1)),disabled:1===M,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:(0,l.jsx)(J,{className:"w-6 h-6"})}),(0,l.jsxs)("span",{className:"text-lg font-medium text-gray-700 px-2",children:["page ",M," / ",Math.max(1,I)]}),(0,l.jsx)("button",{onClick:()=>E(e=>Math.min(I,e+1)),disabled:M===I||0===I,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:(0,l.jsx)(B,{className:"w-6 h-6"})})]})]})]})})]})};function Z(){let[e,t]=(0,s.useState)("home"),[a,r]=(0,s.useState)(!1);return(0,l.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100 overflow-hidden",children:[(0,l.jsx)(b,{activeTab:e,onTabChange:e=>{if(a){if(!window.confirm("編集中のデータは破棄されますが、移動してもよろしいですか？"))return;r(!1)}t(e)}}),(0,l.jsxs)("main",{className:"flex-1 overflow-hidden relative",children:["home"===e&&(0,l.jsx)(F,{}),"inpatients"===e&&(0,l.jsx)(T,{}),"patients"===e&&(0,l.jsx)(X,{onEditingChange:r}),"wards"===e&&(0,l.jsx)(V,{}),"settings"===e&&(0,l.jsx)("div",{className:"p-8 text-center text-gray-400",children:"設定画面 (Coming Soon)"})]})]})}},6387:(e,t,a)=>{Promise.resolve().then(a.bind(a,5891))}},e=>{e.O(0,[441,255,358],()=>e(e.s=6387)),_N_E=e.O()}]);