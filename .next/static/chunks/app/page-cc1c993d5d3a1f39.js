(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6387:(e,t,a)=>{Promise.resolve().then(a.bind(a,8386))},8386:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var l=a(5155),r=a(2115);let n=[{id:"a_wounds",category:"a",label:"創傷処置",points:1,inputType:"checkbox"},{id:"a_respiratory",category:"a",label:"呼吸ケア",points:1,inputType:"checkbox"},{id:"a_infusion",category:"a",label:"点滴ライン同時3本以上の管理",points:1,inputType:"checkbox"},{id:"a_ecg",category:"a",label:"心電図モニターの管理",points:1,inputType:"checkbox"},{id:"a_syringe_driver",category:"a",label:"シリンジポンプの管理",points:1,inputType:"checkbox"},{id:"a_emergency",category:"a",label:"救急搬送後の入院/緊急入院(2日間)",points:2,inputType:"checkbox"},{id:"a_special",category:"a",label:"専門的な治療・処置(抗悪性腫瘍剤等)",points:3,inputType:"checkbox"},{id:"b_bed_mobility",category:"b",label:"寝返り",points:2,inputType:"select",hasAssistance:!1,options:[{label:"できる(0点)",value:0,explanation:"手すり等を使わずに自力で寝返りができる"},{label:"何かにつかまればできる(1点)",value:1,explanation:"柵や介助バーを使用すれば可能"},{label:"できない(2点)",value:2,explanation:"自力では全くできない、または医学的安静で禁止されている"}]},{id:"b_transfer",category:"b",label:"移乗",points:2,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"乗り移り動作が自力で可能、または介助不要"},{label:"一部介助(1点)",value:1,explanation:"見守りや手を添える程度の介助が必要"},{label:"全介助(2点)",value:2,explanation:"抱え上げなど、人的な力が全面的に必要"}]},{id:"b_oral_care",category:"b",label:"口腔清潔",points:1,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"準備から実施まで一人で完結できる"},{label:"要介助(1点)",value:1,explanation:"物品の準備や仕上げ磨きなどに介助が必要"}]},{id:"b_eating",category:"b",label:"食事摂取",points:2,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"配膳された食事を自力で摂取できる"},{label:"一部介助(1点)",value:1,explanation:"小さく刻む、蓋を開ける、一部介助などが必要"},{label:"全介助(2点)",value:2,explanation:"経管栄養を含む、全ての摂取に介助が必要"}]},{id:"b_clothes",category:"b",label:"衣服の着脱",points:2,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"ボタン留め等含め、全て一人で可能"},{label:"一部介助(1点)",value:1,explanation:"背中を整える、靴下を履くなどに介助が必要"},{label:"全介助(2点)",value:2,explanation:"自分では着脱がほとんどできない"}]},{id:"b_instruction",category:"b",label:"診療・療養上の指示が通じる",points:1,inputType:"select",hasAssistance:!1,options:[{label:"はい(0点)",value:0},{label:"いいえ(1点)",value:1}]},{id:"b_danger",category:"b",label:"危険行動",points:2,inputType:"select",hasAssistance:!1,options:[{label:"ない(0点)",value:0},{label:"ある(2点)",value:2}]},{id:"c_thoraco",category:"c",label:"開胸手術(9日間)",points:1,inputType:"checkbox"},{id:"c_laparo",category:"c",label:"開腹手術(6日間)",points:1,inputType:"checkbox"},{id:"c_craniotomy",category:"c",label:"開頭手術(11日間)",points:1,inputType:"checkbox"},{id:"c_other_surgery",category:"c",label:"その他手術(5日間)",points:1,inputType:"checkbox"}],s={ACUTE_GENERAL_5:{id:"acute_general_5",name:"急性期一般入院料5",thresholds:{pattern1:{a:2,b:3},pattern2:{c:1}}}},o="nursing_patients",i="nursing_assessment_",c=(e,t)=>"".concat(i).concat(e,"_").concat(t);function d(e,t){var a,l,r,o,i,c;let d=0,b=0,u=0,p=t.items||{};n.forEach(e=>{let t=p[e.id];if("a"===e.category)!0===t&&(d+=e.points);else if("c"===e.category)!0===t&&(u+=e.points);else if("b"===e.category&&"number"==typeof t){let a=t;if(e.hasAssistance){let t=p["".concat(e.id,"_assist")];a*="number"==typeof t?t:0}b+=a}});let g=null!=(a=t.scoreA)?a:d,x=null!=(l=t.scoreB)?l:b,h=null!=(r=t.scoreC)?r:u;if(e===s.ACUTE_GENERAL_5.id){let e=s.ACUTE_GENERAL_5.thresholds,t=g>=(null!=(o=e.pattern1.a)?o:0)&&x>=(null!=(i=e.pattern1.b)?i:0),a=h>=(null!=(c=e.pattern2.c)?c:0);return t||a}return console.warn("Unknown admission fee ID: ".concat(e)),!1}let b=e=>{var t;let{item:a,currentValue:n,currentAssistValue:s,onSave:o,onClose:i,position:c}=e,d=(0,r.useRef)(null),[b,u]=r.useState(n),[p,g]=r.useState(null!=s?s:1);(0,r.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&i()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i]);let x={top:c.y,left:c.x,zIndex:1e3};return(0,l.jsxs)("div",{ref:d,className:"fixed bg-white border border-gray-300 shadow-xl rounded-lg p-4 w-80 text-sm animate-in fade-in zoom-in-95 duration-100",style:x,children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3 pb-2 border-b border-gray-100",children:[(0,l.jsx)("h3",{className:"font-bold text-gray-800",children:a.label}),(0,l.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[a.hasAssistance&&(0,l.jsxs)("div",{className:"bg-orange-50 p-2 rounded border border-orange-200 mb-2",children:[(0,l.jsx)("span",{className:"text-xs font-bold text-orange-800 block mb-1",children:"介助の実施"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>g(1),className:"flex-1 py-1 px-2 rounded text-xs border ".concat(1===p?"bg-orange-500 text-white border-orange-600":"bg-white text-gray-600 border-gray-300"),children:"あり (実施)"}),(0,l.jsx)("button",{onClick:()=>g(0),className:"flex-1 py-1 px-2 rounded text-xs border ".concat(0===p?"bg-gray-600 text-white border-gray-700":"bg-white text-gray-600 border-gray-300"),children:"なし (未実施)"})]}),(0,l.jsx)("p",{className:"text-[10px] text-orange-600 mt-1",children:"※「なし」を選択すると、項目の点数は0点になります。"})]}),"checkbox"===a.inputType?(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("button",{onClick:()=>{o(!0),i()},className:"p-3 text-left rounded border transition-colors ".concat(!0===n?"bg-blue-50 border-blue-500 text-blue-800 font-bold":"hover:bg-gray-50 border-gray-200"),children:"あり / 実施 (1点)"}),(0,l.jsx)("button",{onClick:()=>{o(!1),i()},className:"p-3 text-left rounded border transition-colors ".concat(!1===n?"bg-gray-100 border-gray-400 font-bold":"hover:bg-gray-50 border-gray-200"),children:"なし / 未実施 (0点)"}),a.description&&(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.description})]}):(0,l.jsx)("div",{className:"flex flex-col gap-2",children:null==(t=a.options)?void 0:t.map(e=>(0,l.jsxs)("button",{onClick:()=>{o(e.value,a.hasAssistance?p:void 0),i()},className:"p-3 text-left rounded border transition-colors group ".concat(n===e.value?"bg-green-50 border-green-500 ring-1 ring-green-500":"hover:bg-gray-50 border-gray-200"),children:[(0,l.jsx)("div",{className:"flex justify-between items-center",children:(0,l.jsx)("span",{className:"font-bold ".concat(n===e.value?"text-green-800":"text-gray-700"),children:e.label})}),e.explanation&&(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1 group-hover:text-gray-700",children:e.explanation})]},e.value))})]}),(0,l.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-100 text-right",children:(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"値を選択すると確定して閉じます"})})]})},u=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let g=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:i,iconNode:c,...d}=e;return(0,r.createElement)("svg",{ref:t,...p,width:l,height:l,stroke:a,strokeWidth:s?24*Number(n)/Number(l):n,className:u("lucide",o),...d},[...c.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(i)?i:[i]])}),x=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:n,...s}=a;return(0,r.createElement)(g,{ref:l,iconNode:t,className:u("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...s})});return a.displayName="".concat(e),a},h=x("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),y=x("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),m=x("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),f=e=>{var t,a;let{patientId:s,currentDate:o,onDateSelect:u,lastUpdated:p}=e,g=new Date(o),x=g.getFullYear(),f=g.getMonth()+1,v="".concat(x,"-").concat(String(f).padStart(2,"0")),N=Array.from({length:new Date(x,f,0).getDate()},(e,t)=>"".concat(x,"-").concat(String(f).padStart(2,"0"),"-").concat(String(t+1).padStart(2,"0"))),[w,j]=(0,r.useState)({});(0,r.useEffect)(()=>{j(((e,t)=>{let a={},l="".concat(i).concat(e,"_").concat(t);for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);if(t&&t.startsWith(l)){let e=localStorage.getItem(t);if(e){let t=JSON.parse(e);a[t.date]=t}}}return a})(s,v))},[s,v,p]);let k=(0,r.useMemo)(()=>{let e={a:[],b:[],c:[]};return n.forEach(t=>{e[t.category]&&e[t.category].push(t)}),e},[]),[S,_]=(0,r.useState)(null),[A,E]=(0,r.useState)(null),[C,T]=(0,r.useState)(null),[I,O]=(0,r.useState)({isOpen:!1,item:null,position:{x:0,y:0}}),D=(0,r.useMemo)(()=>[...k.a,...k.b,...k.c],[k]),L=()=>{confirm("編集中の内容を破棄しますか？")&&(_(null),E(null),T(null),O({isOpen:!1,item:null,position:{x:0,y:0}}))},M=()=>{A&&((e=>{let t=c(e.patientId,e.date);localStorage.setItem(t,JSON.stringify(e))})(A),j(e=>({...e,[A.date]:A})),_(null),E(null),T(null))};(0,r.useEffect)(()=>{if(!S||!C)return void O(e=>({...e,isOpen:!1}));let e=n.find(e=>e.id===C);if(!e)return;let t=document.querySelector('[data-cell-date="'.concat(S,'"][data-cell-item="').concat(C,'"]'));if(t){let a=t.getBoundingClientRect(),l=a.right+10,r=a.top+window.scrollY;l+320>window.innerWidth&&(l=a.left-320-10),O({isOpen:!0,item:e,position:{x:l,y:r}}),t.scrollIntoView({behavior:"smooth",block:"nearest"})}},[C,S]),(0,r.useEffect)(()=>{if(!S)return;let e=e=>{if(!e.metaKey&&!e.ctrlKey){if("ArrowDown"===e.key||"Enter"===e.key||"Tab"===e.key)e.preventDefault(),z(1);else if("ArrowUp"===e.key)e.preventDefault(),z(-1);else if(["0","1","2"].includes(e.key)&&C){let t=n.find(e=>e.id===C);if(t){let a=parseInt(e.key);if(e.preventDefault(),t.options){if(t.options.find(e=>e.value===a))return void R(t,a)}else if("checkbox"===t.inputType){1===a&&R(t,!0),0===a&&R(t,!1);return}}}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[S,C,A,D]);let z=e=>{if(!C)return;let t=D.findIndex(e=>e.id===C);if(-1===t)return;let a=t+e;a>=0&&a<D.length&&T(D[a].id)},R=(e,t)=>{U(t,1),z(1)},U=(e,t)=>{if(!A||!C||!n.find(e=>e.id===C))return;let a={...A.items,[C]:e};"number"==typeof t&&(a["".concat(C,"_assist")]=t);let l=0,r=0,s=0;n.forEach(e=>{let t=a[e.id];if("a"===e.category&&!0===t&&(l+=e.points),"c"===e.category&&!0===t&&(s+=e.points),"b"===e.category&&"number"==typeof t){let l=t;if(e.hasAssistance){let t=a["".concat(e.id,"_assist")];l*="number"==typeof t?t:1}r+=l}});let o=d(A.admissionFeeId,{items:a,scoreA:l,scoreB:r,scoreC:s});E({...A,items:a,scores:{a:l,b:r,c:s},isSevere:o})};return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6 border border-gray-200 inline-block min-w-full",children:[(0,l.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:(0,l.jsxs)("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:["月間評価推移 (",x,"年",f,"月)",(0,l.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"New"}),S&&(0,l.jsxs)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded flex items-center gap-1",children:[(0,l.jsx)(h,{className:"w-3 h-3"})," 編集中: ",S]})]})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("table",{className:"w-full text-xs text-center border-collapse",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-2 border border-gray-300 min-w-[300px] text-left bg-gray-100",children:"項目 / 日付"}),N.map(e=>{let t=parseInt(e.split("-")[2]),a=e===o,r=e===S,i=r?A:w[e],c=null==i?void 0:i.isSevere;return(0,l.jsx)("th",{className:"\n                      p-2 border border-gray-300 min-w-[60px] transition-colors relative group\n                      ".concat(r?"bg-yellow-50 border-yellow-400 border-2 border-b-0":"","\n                      ").concat(!r&&a?"bg-blue-600 text-white":"","\n                      ").concat(!r&&!a?"hover:bg-gray-200":"","\n                      ").concat(!r&&c?"bg-pink-100 text-red-800":"","\n                    "),onClick:()=>!r&&u(e),children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,l.jsx)("span",{children:t}),r?(0,l.jsxs)("div",{className:"flex gap-1 z-50 relative",children:[" ",(0,l.jsx)("button",{onClick:M,className:"p-1 bg-green-500 text-white rounded hover:bg-green-600",title:"保存",children:(0,l.jsx)(y,{className:"w-3 h-3"})}),(0,l.jsx)("button",{onClick:L,className:"p-1 bg-gray-500 text-white rounded hover:bg-gray-600",title:"キャンセル",children:(0,l.jsx)(m,{className:"w-3 h-3"})})]}):(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{if(S&&S!==e&&!confirm("現在編集中のデータを破棄して別の日の編集を開始しますか？"))return;let t=w[e],a=(null==t?void 0:t.admissionFeeId)||"acute_general_5",{items:l,scoreA:r,scoreB:o,scoreC:i}=((e,t)=>{let a=0,l=0,r=0;return n.forEach(t=>{let n=e[t.id];if("a"===t.category&&!0===n&&(a+=t.points),"c"===t.category&&!0===n&&(r+=t.points),"b"===t.category&&"number"==typeof n){let a=n;if(t.hasAssistance){let l=e["".concat(t.id,"_assist")];a*="number"==typeof l?l:1}l+=a}}),{items:e,scoreA:a,scoreB:l,scoreC:r}})((null==t?void 0:t.items)?{...t.items}:{},0);E({patientId:s,date:e,items:l,admissionFeeId:a,scores:{a:r,b:o,c:i},isSevere:d(a,{items:l,scoreA:r,scoreB:o,scoreC:i})}),_(e),D.length>0&&T(D[0].id)})(e)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:(0,l.jsx)(h,{className:"w-3 h-3"})})]})},e)})]})}),(0,l.jsxs)("tbody",{children:[(()=>{let e=e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"p-2 border border-gray-300 text-left bg-white truncate max-w-[300px]",title:e.label,children:e.label}),N.map(t=>{var a,r,n;let s=t===S,i=s?A:w[t],c=null==i||null==(a=i.items)?void 0:a[e.id],d="";"checkbox"===e.inputType?!0===c&&(d=(0,l.jsx)("span",{className:"text-blue-600 font-bold",children:"●"})):"number"==typeof c&&(d=c);let b=s?null==(n=w[t])||null==(r=n.items)?void 0:r[e.id]:void 0,p=s&&C===e.id;return(0,l.jsxs)("td",{"data-cell-date":t,"data-cell-item":e.id,className:"\n                            border border-gray-300 relative\n                            ".concat(s?"cursor-pointer":"","\n                            ").concat(s&&!p?"bg-white hover:bg-yellow-50":"","\n                            ").concat(p?"bg-yellow-200 outline outline-2 outline-blue-500 z-10":""," \n                            ").concat(s?"border-yellow-400 border-x-2":"","\n                            ").concat(!s&&(null==i?void 0:i.isSevere)?"bg-pink-50":"","\n                          "),onClick:a=>s&&((e,t,a)=>{if(S!==t){t!==o&&u(t);return}T(a.id)})(0,t,e),children:[d,s&&c!==b&&(0,l.jsx)("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]},t)})]},e.id);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("tr",{className:"bg-blue-50 font-bold",children:[(0,l.jsx)("td",{className:"bg-blue-50 p-2 border",children:"A項目 (得点)"}),N.map(e=>{var t,a,r,n;return(0,l.jsx)("td",{className:"border ".concat(e===S?"bg-yellow-50 border-yellow-400 border-x-2":""," ").concat((null==(t=w[e])?void 0:t.isSevere)?"bg-pink-50":""),children:null!=(n=null==(r=e===S?A:w[e])||null==(a=r.scores)?void 0:a.a)?n:"-"},e)})]}),k.a.map(e),(0,l.jsxs)("tr",{className:"bg-green-50 font-bold",children:[(0,l.jsx)("td",{className:"bg-green-50 p-2 border",children:"B項目 (得点)"}),N.map(e=>{var t,a,r,n;return(0,l.jsx)("td",{className:"border ".concat(e===S?"bg-yellow-50 border-yellow-400 border-x-2":""," ").concat((null==(t=w[e])?void 0:t.isSevere)?"bg-pink-50":""),children:null!=(n=null==(r=e===S?A:w[e])||null==(a=r.scores)?void 0:a.b)?n:"-"},e)})]}),k.b.map(e),(0,l.jsxs)("tr",{className:"bg-gray-100 font-bold",children:[(0,l.jsx)("td",{className:"bg-gray-100 p-2 border",children:"C項目 (得点)"}),N.map(e=>{var t,a,r,n;return(0,l.jsx)("td",{className:"border ".concat(e===S?"bg-yellow-50 border-yellow-400 border-x-2":""," ").concat((null==(t=w[e])?void 0:t.isSevere)?"bg-pink-50":""),children:null!=(n=null==(r=e===S?A:w[e])||null==(a=r.scores)?void 0:a.c)?n:"-"},e)})]})]})})(),(0,l.jsxs)("tr",{className:"bg-gray-800 text-white font-bold",children:[(0,l.jsx)("td",{className:"p-2 border border-gray-600 text-left bg-gray-800",children:"判定結果"}),N.map(e=>{let t=e===S?A:w[e];return t?(0,l.jsx)("td",{className:"border border-gray-600 ".concat(t.isSevere?"bg-red-600":"bg-gray-700"),children:t.isSevere?"○":"\xd7"},e):(0,l.jsx)("td",{className:"border border-gray-600 bg-gray-100"},e)})]})]})]})}),I.isOpen&&I.item&&(0,l.jsx)(b,{item:I.item,currentValue:null==A||null==(t=A.items)?void 0:t[I.item.id],currentAssistValue:null==A||null==(a=A.items)?void 0:a["".concat(I.item.id,"_assist")],onSave:U,onClose:()=>O(e=>({...e,isOpen:!1})),position:I.position})]})},v=x("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function N(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[d,b]=(0,r.useState)(void 0),[u,p]=(0,r.useState)(0),[g,x]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{x(!0)},[]),(0,r.useEffect)(()=>{i(new Date().toISOString().split("T")[0]),(()=>{let e=localStorage.getItem(o);return e?JSON.parse(e):localStorage.setItem(o,JSON.stringify([{id:"p001",name:"佐藤 太郎",gender:"1",birthday:"1950-01-01",admissionDate:"2024-04-01"},{id:"p002",name:"鈴木 花子",gender:"2",birthday:"1945-05-15",admissionDate:"2024-04-10"},{id:"p003",name:"田中 一郎",gender:"1",birthday:"1960-11-20",admissionDate:"2024-04-05"}]))})();let e=(()=>{let e=localStorage.getItem(o);return e?JSON.parse(e):[]})();t(e),e.length>0&&n(e[0].id)},[]),(0,r.useEffect)(()=>{if(!a||!s)return;let e=((e,t)=>{let a=c(e,t),l=localStorage.getItem(a);return l?JSON.parse(l):null})(a,s);e?b(e.items):b(void 0)},[a,s,u]),e.find(e=>e.id===a),g)?(0,l.jsxs)("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[(0,l.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col shrink-0",children:[(0,l.jsx)("div",{className:"p-4 border-b border-gray-200 bg-blue-50",children:(0,l.jsxs)("h1",{className:"text-lg font-bold text-blue-800 flex items-center gap-2",children:[(0,l.jsx)(v,{className:"w-5 h-5"})," 患者一覧"]})}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:e.map(e=>(0,l.jsxs)("button",{onClick:()=>n(e.id),className:"w-full text-left p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ".concat(a===e.id?"bg-blue-100 border-l-4 border-l-blue-600":""),children:[(0,l.jsx)("div",{className:"font-bold text-gray-800",children:e.name}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["1"===e.gender?"男性":"女性"," / ",e.birthday,"生"]})]},e.id))}),(0,l.jsx)("div",{className:"p-4 border-t border-gray-200 text-xs text-gray-400 text-center",children:"Nursing Assessment System v1.1"})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4",children:[a&&s?null:(0,l.jsx)("div",{className:"p-4 bg-yellow-100 text-yellow-800 rounded",children:(0,l.jsxs)("p",{children:["Loading State... Patient: ",a||"None",", Date: ",s||"None"]})}),a&&s&&(0,l.jsx)("section",{className:"w-full",children:(0,l.jsx)(f,{patientId:a,currentDate:s,onDateSelect:i,lastUpdated:u})})]})]}):(0,l.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-100",children:"Loading..."})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=6387)),_N_E=e.O()}]);