(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5891:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>$});var s=a(5155),l=a(2115);let r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:x,...g}=e;return(0,l.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:a,strokeWidth:o?24*Number(i)/Number(s):i,className:r("lucide",d),...g},[...x.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let a=(0,l.forwardRef)((a,s)=>{let{className:n,...o}=a;return(0,l.createElement)(i,{ref:s,iconNode:t,className:r("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...o})});return a.displayName="".concat(e),a},d=o("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),c=o("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),x=o("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]),g=o("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),h=e=>{let{activeTab:t,onTabChange:a}=e,l=[{id:"home",label:"ホーム",icon:d},{id:"patients",label:"患者管理",icon:c},{id:"inpatients",label:"入院患者",icon:x},{id:"wards",label:"病棟・病室",icon:x},{id:"settings",label:"マスタ設定",icon:g}];return(0,s.jsxs)("header",{className:"bg-white border-b border-gray-200 h-14 flex items-center px-4 shrink-0",children:[(0,s.jsx)("div",{className:"font-bold text-xl mr-8 text-blue-900",children:"HfileMaker"}),(0,s.jsx)("nav",{className:"flex h-full",children:l.map(e=>{let l=t===e.id,r=e.icon;return(0,s.jsxs)("button",{onClick:()=>a(e.id),className:"\n                flex items-center gap-2 px-4 h-full border-b-2 text-lg font-bold transition-colors\n                ".concat(l?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50","\n              "),children:[(0,s.jsx)(r,{className:"w-5 h-5"}),e.label]},e.id)})}),(0,s.jsx)("div",{className:"ml-auto flex items-center gap-4 text-xs text-gray-400",children:"Demo User"})]})},b=[{id:"a_wounds",category:"a",label:"創傷処置",points:1,inputType:"checkbox"},{id:"a_respiratory",category:"a",label:"呼吸ケア",points:1,inputType:"checkbox"},{id:"a_infusion",category:"a",label:"点滴ライン同時3本以上の管理",points:1,inputType:"checkbox"},{id:"a_ecg",category:"a",label:"心電図モニターの管理",points:1,inputType:"checkbox"},{id:"a_syringe_driver",category:"a",label:"シリンジポンプの管理",points:1,inputType:"checkbox"},{id:"a_emergency",category:"a",label:"救急搬送後の入院/緊急入院(2日間)",points:2,inputType:"checkbox"},{id:"a_special",category:"a",label:"専門的な治療・処置(抗悪性腫瘍剤等)",points:3,inputType:"checkbox"},{id:"b_bed_mobility",category:"b",label:"寝返り",points:2,inputType:"select",hasAssistance:!1,options:[{label:"できる(0点)",value:0,explanation:"手すり等を使わずに自力で寝返りができる"},{label:"何かにつかまればできる(1点)",value:1,explanation:"柵や介助バーを使用すれば可能"},{label:"できない(2点)",value:2,explanation:"自力では全くできない、または医学的安静で禁止されている"}]},{id:"b_transfer",category:"b",label:"移乗",points:2,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"乗り移り動作が自力で可能、または介助不要"},{label:"一部介助(1点)",value:1,explanation:"見守りや手を添える程度の介助が必要"},{label:"全介助(2点)",value:2,explanation:"抱え上げなど、人的な力が全面的に必要"}]},{id:"b_oral_care",category:"b",label:"口腔清潔",points:1,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"準備から実施まで一人で完結できる"},{label:"要介助(1点)",value:1,explanation:"物品の準備や仕上げ磨きなどに介助が必要"}]},{id:"b_eating",category:"b",label:"食事摂取",points:2,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"配膳された食事を自力で摂取できる"},{label:"一部介助(1点)",value:1,explanation:"小さく刻む、蓋を開ける、一部介助などが必要"},{label:"全介助(2点)",value:2,explanation:"経管栄養を含む、全ての摂取に介助が必要"}]},{id:"b_clothes",category:"b",label:"衣服の着脱",points:2,inputType:"select",hasAssistance:!0,options:[{label:"自立(0点)",value:0,explanation:"ボタン留め等含め、全て一人で可能"},{label:"一部介助(1点)",value:1,explanation:"背中を整える、靴下を履くなどに介助が必要"},{label:"全介助(2点)",value:2,explanation:"自分では着脱がほとんどできない"}]},{id:"b_instruction",category:"b",label:"診療・療養上の指示が通じる",points:1,inputType:"select",hasAssistance:!1,options:[{label:"はい(0点)",value:0},{label:"いいえ(1点)",value:1}]},{id:"b_danger",category:"b",label:"危険行動",points:2,inputType:"select",hasAssistance:!1,options:[{label:"ない(0点)",value:0},{label:"ある(2点)",value:2}]},{id:"c_thoraco",category:"c",label:"開胸手術(9日間)",points:1,inputType:"checkbox"},{id:"c_laparo",category:"c",label:"開腹手術(6日間)",points:1,inputType:"checkbox"},{id:"c_craniotomy",category:"c",label:"開頭手術(11日間)",points:1,inputType:"checkbox"},{id:"c_other_surgery",category:"c",label:"その他手術(5日間)",points:1,inputType:"checkbox"}],m={ACUTE_GENERAL_5:{id:"acute_general_5",name:"急性期一般入院料5",thresholds:{pattern1:{a:2,b:3},pattern2:{c:1}}}},u="nursing_patients_v5",p="nursing_admissions_v5",y="nursing_assessment_",f=e=>{let t;e.id||(e.id="p"+Math.random().toString(36).substr(2,9));let a=j(),s=a.findIndex(t=>t.id===e.id);return s>=0?(t=[...a])[s]=e:t=[...a,e],localStorage.setItem(u,JSON.stringify(t)),e},v=(e,t)=>{let a=[...N(null).filter(t=>t.patientId!==e),...t.map(t=>({...t,id:t.id.startsWith("temp_")?"adm"+Math.random().toString(36).substr(2,9):t.id,patientId:e}))];localStorage.setItem(p,JSON.stringify(a))},j=()=>{let e=localStorage.getItem(u);return e?JSON.parse(e):[]},N=e=>{let t=localStorage.getItem(p),a=t?JSON.parse(t):[];return null===e?a:a.filter(t=>t.patientId===e)},w=(e,t)=>"".concat(y).concat(e,"_").concat(t),k=(e,t)=>{let a={},s="".concat(y).concat(e,"_").concat(t);for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);if(t&&t.startsWith(s)){let e=localStorage.getItem(t);if(e){let t=JSON.parse(e);a[t.date]=t}}}return a};function S(e,t){var a,s,l,r,n,i;let o=0,d=0,c=0,x=t.items||{};b.forEach(e=>{let t=x[e.id];if("a"===e.category)!0===t&&(o+=e.points);else if("c"===e.category)!0===t&&(c+=e.points);else if("b"===e.category&&"number"==typeof t){let a=t;if(e.hasAssistance){let t=x["".concat(e.id,"_assist")];a*="number"==typeof t?t:0}d+=a}});let g=null!=(a=t.scoreA)?a:o,h=null!=(s=t.scoreB)?s:d,u=null!=(l=t.scoreC)?l:c;if(e===m.ACUTE_GENERAL_5.id){let e=m.ACUTE_GENERAL_5.thresholds,t=g>=(null!=(r=e.pattern1.a)?r:0)&&h>=(null!=(n=e.pattern1.b)?n:0),a=u>=(null!=(i=e.pattern2.c)?i:0);return t||a}return console.warn("Unknown admission fee ID: ".concat(e)),!1}let C=e=>{var t;let{item:a,currentValue:r,currentAssistValue:n,onSave:i,onClose:o,position:d}=e,c=(0,l.useRef)(null),[x,g]=l.useState(r),[h,b]=l.useState(null!=n?n:1);(0,l.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);let m={top:d.y,left:d.x,zIndex:1e3};return(0,s.jsxs)("div",{ref:c,className:"fixed bg-white border border-gray-300 shadow-xl rounded-lg p-4 w-80 text-sm animate-in fade-in zoom-in-95 duration-100",style:m,children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3 pb-2 border-b border-gray-100",children:[(0,s.jsx)("h3",{className:"font-bold text-gray-800",children:a.label}),(0,s.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[a.hasAssistance&&(0,s.jsxs)("div",{className:"bg-orange-50 p-2 rounded border border-orange-200 mb-2",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-orange-800 block mb-1",children:"介助の実施"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>b(1),className:"flex-1 py-1 px-2 rounded text-xs border ".concat(1===h?"bg-orange-500 text-white border-orange-600":"bg-white text-gray-600 border-gray-300"),children:"あり (実施)"}),(0,s.jsx)("button",{onClick:()=>b(0),className:"flex-1 py-1 px-2 rounded text-xs border ".concat(0===h?"bg-gray-600 text-white border-gray-700":"bg-white text-gray-600 border-gray-300"),children:"なし (未実施)"})]}),(0,s.jsx)("p",{className:"text-[10px] text-orange-600 mt-1",children:"※「なし」を選択すると、項目の点数は0点になります。"})]}),"checkbox"===a.inputType?(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("button",{onClick:()=>{i(!0),o()},className:"p-3 text-left rounded border transition-colors ".concat(!0===r?"bg-blue-50 border-blue-500 text-blue-800 font-bold":"hover:bg-gray-50 border-gray-200"),children:"あり / 実施 (1点)"}),(0,s.jsx)("button",{onClick:()=>{i(!1),o()},className:"p-3 text-left rounded border transition-colors ".concat(!1===r?"bg-gray-100 border-gray-400 font-bold":"hover:bg-gray-50 border-gray-200"),children:"なし / 未実施 (0点)"}),a.description&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.description})]}):(0,s.jsx)("div",{className:"flex flex-col gap-2",children:null==(t=a.options)?void 0:t.map(e=>(0,s.jsxs)("button",{onClick:()=>{i(e.value,a.hasAssistance?h:void 0),o()},className:"p-3 text-left rounded border transition-colors group ".concat(r===e.value?"bg-green-50 border-green-500 ring-1 ring-green-500":"hover:bg-gray-50 border-gray-200"),children:[(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsx)("span",{className:"font-bold ".concat(r===e.value?"text-green-800":"text-gray-700"),children:e.label})}),e.explanation&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 group-hover:text-gray-700",children:e.explanation})]},e.value))})]}),(0,s.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-100 text-right",children:(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"値を選択すると確定して閉じます"})})]})},_=o("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),D=o("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),M=o("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),E=o("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),I=o("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),A=e=>{var t,a,r,n;let{patientId:i,currentDate:o,onDateSelect:d,lastUpdated:c,onDirtyChange:x}=e,g=new Date(o),h=g.getFullYear(),m=g.getMonth()+1,u="".concat(h,"-").concat(String(m).padStart(2,"0")),p=Array.from({length:new Date(h,m,0).getDate()},(e,t)=>"".concat(h,"-").concat(String(m).padStart(2,"0"),"-").concat(String(t+1).padStart(2,"0"))),[y,f]=(0,l.useState)({}),[v,j]=(0,l.useState)(void 0);(0,l.useEffect)(()=>{j(((e,t)=>N(e).find(e=>e.admissionDate<=t&&(!e.dischargeDate||e.dischargeDate>=t)))(i,o))},[i,o]),(0,l.useEffect)(()=>{if(!v)return void f({});f(k(v.id,u))},[v,u,c]);let A=(0,l.useMemo)(()=>{let e={a:[],b:[],c:[]};return b.forEach(t=>{e[t.category]&&e[t.category].push(t)}),e},[]),[T,z]=(0,l.useState)(null),[O,L]=(0,l.useState)({}),[F,R]=(0,l.useState)(null),V=Object.keys(O).length>0||!!T;(0,l.useEffect)(()=>{null==x||x(V);let e=e=>{V&&(e.preventDefault(),e.returnValue="")};return V&&window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[V,x]),(0,l.useEffect)(()=>{z(null),L({}),R(null)},[i]);let[W,H]=(0,l.useState)({isOpen:!1,item:null,position:{x:0,y:0}}),q=(0,l.useMemo)(()=>[...A.a,...A.b,...A.c],[A]),U=(e,t)=>{let a=0,s=0,l=0;return b.forEach(t=>{let r=e[t.id];if("a"===t.category&&!0===r&&(a+=t.points),"c"===t.category&&!0===r&&(l+=t.points),"b"===t.category&&"number"==typeof r){let a=r;if(t.hasAssistance){let s=e["".concat(t.id,"_assist")];a*="number"==typeof s?s:1}s+=a}}),{items:e,scoreA:a,scoreB:s,scoreC:l}},J=()=>{confirm("編集中の内容を破棄しますか？")&&(z(null),L({}),R(null),H({isOpen:!1,item:null,position:{x:0,y:0}}))},B=()=>{Object.keys(O).forEach(e=>{(e=>{let t=w(e.admissionId,e.date);localStorage.setItem(t,JSON.stringify(e))})(O[e])}),v&&f(k(v.id,u)),z(null),L({}),R(null)};(0,l.useEffect)(()=>{if(!T||!F)return void H(e=>({...e,isOpen:!1}));let e=b.find(e=>e.id===F);if(!e)return;let t=document.querySelector('[data-cell-date="'.concat(T,'"][data-cell-item="').concat(F,'"]'));if(t){let a=t.getBoundingClientRect(),s=a.right+10,l=a.top+window.scrollY;s+320>window.innerWidth&&(s=a.left-320-10),H({isOpen:!0,item:e,position:{x:s,y:l}}),t.scrollIntoView({behavior:"smooth",block:"nearest"})}},[F,T]),(0,l.useEffect)(()=>{if(!T)return;let e=e=>{if(!e.metaKey&&!e.ctrlKey){if("ArrowDown"===e.key||"Enter"===e.key||"Tab"===e.key)e.preventDefault(),P(1);else if("ArrowUp"===e.key)e.preventDefault(),P(-1);else if(["0","1","2"].includes(e.key)&&F){let t=b.find(e=>e.id===F);if(t){let a=parseInt(e.key);if(e.preventDefault(),t.options){if(t.options.find(e=>e.value===a))return void Y(t,a)}else if("checkbox"===t.inputType){1===a&&Y(t,!0),0===a&&Y(t,!1);return}}}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[T,F,O,q]);let P=e=>{if(!F)return;let t=q.findIndex(e=>e.id===F);if(-1===t)return;let a=t+e;a>=0&&a<q.length&&R(q[a].id)},Y=(e,t)=>{G(t,1),P(1)},G=(e,t)=>{if(!T||!O[T]||!F||!b.find(e=>e.id===F))return;let a=O[T],s={...a.items,[F]:e};"number"==typeof t&&(s["".concat(F,"_assist")]=t);let l=0,r=0,n=0;b.forEach(e=>{let t=s[e.id];if("a"===e.category&&!0===t&&(l+=e.points),"c"===e.category&&!0===t&&(n+=e.points),"b"===e.category&&"number"==typeof t){let a=t;if(e.hasAssistance){let t=s["".concat(e.id,"_assist")];a*="number"==typeof t?t:1}r+=a}});let i=S(a.admissionFeeId,{items:s,scoreA:l,scoreB:r,scoreC:n});L(e=>({...e,[T]:{...a,items:s,scores:{a:l,b:r,c:n},isSevere:i}}))};return(0,s.jsxs)("div",{className:"flex flex-col bg-white rounded-lg shadow mb-6 border border-gray-200 w-full overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:(0,s.jsxs)("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:["月間評価推移 (",h,"年",m,"月)",T&&(0,s.jsxs)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded flex items-center gap-1",children:[(0,s.jsx)(_,{className:"w-3 h-3"})," 編集中: ",T]})]})}),(0,s.jsx)("div",{className:"w-full overflow-x-auto max-h-[80vh]",children:(0,s.jsxs)("table",{className:"w-full text-xs text-center border-separate border-spacing-0",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-2 border border-gray-300 min-w-[300px] text-left bg-gray-100 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] outline outline-1 outline-gray-300",style:{position:"sticky",top:0,left:0,zIndex:60,background:"#f3f4f6"},children:"項目 / 日付"}),p.map((e,t)=>{let a=parseInt(e.split("-")[2]),l=e===o,r=e===T,n=new Date,i=e>"".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0")),c=O[e],x=y[e],g=c||x,h=null==g?void 0:g.isSevere;return(0,s.jsx)("th",{className:"\n                      p-2 border border-gray-300 min-w-[60px] transition-colors relative group\n                      ".concat(r?"bg-yellow-50 border-yellow-400 border-2 border-b-0":"","\n                      ").concat(!r&&l?"bg-blue-600 text-white":"","\n                      ").concat(!r&&!l?"bg-gray-100 hover:bg-gray-200":"","\n                      ").concat(!r&&h?"bg-pink-100 text-red-800":"","\n                      ").concat(i?"bg-gray-50 cursor-not-allowed":"","\n                    "),style:{position:"sticky",top:0,zIndex:50},onClick:()=>!r&&!i&&d(e),children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 ".concat(i?"opacity-50":""),children:[(0,s.jsx)("span",{children:a}),r?(0,s.jsxs)("div",{className:"flex gap-1 z-50 relative items-center",children:[(0,s.jsx)("button",{onClick:B,className:"p-1 bg-green-500 text-white rounded hover:bg-green-600",title:"保存",children:(0,s.jsx)(D,{className:"w-3 h-3"})}),(0,s.jsx)("button",{onClick:J,className:"p-1 bg-gray-500 text-white rounded hover:bg-gray-600",title:"キャンセル",children:(0,s.jsx)(M,{className:"w-3 h-3"})})]}):(0,s.jsxs)("div",{className:"h-5 flex gap-1 items-center justify-center",children:[t>0&&!y[e]&&!i&&(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{if(!v)return;let t=p.indexOf(e);if(t<=0)return alert("前日のデータがありません");let a=y[p[t-1]];if(!a){let t=((e,t)=>{let a=new Date(t);return isNaN(a.getTime())?null:(a.setDate(a.getDate()-1),((e,t)=>{let a=w(e,t),s=localStorage.getItem(a);return s?JSON.parse(s):null})(e,a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")))})(v.id,e);t&&(a=t)}if(!a)return alert("前日のデータが登録されていません");if(T&&T!==e&&!confirm("他の日の編集を破棄してこの日を編集しますか？"))return;let s={...a.items},{scoreA:l,scoreB:r,scoreC:n}=U(s,a.admissionFeeId),i={id:"".concat(e,"_").concat(v.id),admissionId:v.id,date:e,items:s,admissionFeeId:a.admissionFeeId,scores:{a:l,b:r,c:n},isSevere:S(a.admissionFeeId,{items:s,scoreA:l,scoreB:r,scoreC:n})};L({[e]:i}),z(e),q.length>0&&R(q[0].id)})(e)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"前日のデータをコピーして編集",children:(0,s.jsx)(E,{className:"w-3 h-3"})}),!i&&(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{if(!v)return alert("この日付に該当する入院記録がありません。入院日を確認してください。");if(e<v.admissionDate||v.dischargeDate&&e>v.dischargeDate)return alert("入院期間外の日付は編集できません。");if(T&&T!==e&&!confirm("他の日の編集を破棄してこの日を編集しますか？"))return;let t=y[e],a=(null==t?void 0:t.admissionFeeId)||"acute_general_5",{items:s,scoreA:l,scoreB:r,scoreC:n}=U((null==t?void 0:t.items)?{...t.items}:{},a),i={id:"".concat(e,"_").concat(v.id),admissionId:v.id,date:e,items:s,admissionFeeId:a,scores:{a:l,b:r,c:n},isSevere:S(a,{items:s,scoreA:l,scoreB:r,scoreC:n})};L({[e]:i}),z(e),q.length>0&&R(q[0].id)})(e)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"編集",children:(0,s.jsx)(_,{className:"w-3 h-3"})})]}),!!c&&!r&&(0,s.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]})},e)})]})}),(0,s.jsxs)("tbody",{children:[(()=>{let e=e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2 border border-gray-300 text-left bg-white truncate max-w-[300px] shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] outline outline-1 outline-gray-300",title:e.label,style:{position:"sticky",left:0,zIndex:40,background:"white"},children:e.label}),p.map((t,a)=>{var l,r,n,i,c,x,g,h,b;let m=t===T,u=O[t],p=y[t],f=u||p,v=null==f||null==(l=f.items)?void 0:l[e.id],j="";"checkbox"===e.inputType?!0===v&&(j=(0,s.jsx)("span",{className:"text-blue-600 font-bold",children:"●"})):"number"==typeof v&&(j=v);let N=!1;if(u){let t="checkbox"!==e.inputType&&0;(null!=(i=null==(r=u.items)?void 0:r[e.id])?i:t)!==(null!=(c=null==p||null==(n=p.items)?void 0:n[e.id])?c:t)&&(N=!0),!N&&"b"===e.category&&e.hasAssistance&&(null!=(h=null==(x=u.items)?void 0:x["".concat(e.id,"_assist")])?h:1)!==(null!=(b=null==p||null==(g=p.items)?void 0:g["".concat(e.id,"_assist")])?b:1)&&(N=!0)}let w=m&&F===e.id;return(0,s.jsxs)("td",{"data-cell-date":t,"data-cell-item":e.id,className:"\n                            border border-gray-300 relative\n                            ".concat(m?"cursor-pointer":"","\n                            ").concat(m&&!w?"bg-white hover:bg-yellow-50":"","\n                            ").concat(w?"bg-yellow-200 outline outline-2 outline-blue-500 z-10":""," \n                            ").concat(m?"border-yellow-400 border-x-2":"","\n                            ").concat(!m&&(null==f?void 0:f.isSevere)?"bg-pink-50":"","\n                          "),onClick:a=>m&&((e,t,a)=>{if(T!==t){t!==o&&d(t);return}R(a.id)})(0,t,e),children:[j,N&&(0,s.jsx)("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]},t)})]},e.id),t=(e,t,a)=>(0,s.jsxs)("tr",{className:"".concat(a," font-bold"),children:[(0,s.jsx)("td",{className:"".concat(a," p-2 border shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]"),style:{position:"sticky",left:0,zIndex:40},children:e}),p.map((e,a)=>{var l,r;let n=O[e],i=y[e],o=n||i,d=e===T;return(0,s.jsx)("td",{className:"border ".concat(d?"bg-yellow-50 border-yellow-400 border-x-2":""," ").concat(!d&&(null==o?void 0:o.isSevere)?"bg-pink-50":""),children:null!=(r=null==o||null==(l=o.scores)?void 0:l[t])?r:"-"},e)})]});return(0,s.jsxs)(s.Fragment,{children:[t("A項目 (得点)","a","bg-blue-50"),A.a.map(e),t("B項目 (得点)","b","bg-green-50"),A.b.map(e),t("C項目 (得点)","c","bg-gray-100"),A.c.map(e)]})})(),(0,s.jsxs)("tr",{className:"bg-gray-800 text-white font-bold",children:[(0,s.jsx)("td",{className:"p-2 border border-gray-600 text-left bg-gray-800 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] outline outline-1 outline-gray-600",style:{position:"sticky",left:0,zIndex:40,background:"#1f2937",color:"white"},children:"判定結果"}),p.map((e,t)=>{let a=O[e],l=y[e],r=a||l;return r?e===T?(0,s.jsx)("td",{className:"border border-gray-600 bg-gray-700",children:(0,s.jsx)("button",{onClick:()=>(e=>{v&&confirm("".concat(e," のデータを削除しますか？"))&&(((e,t)=>{let a=w(e,t);localStorage.removeItem(a)})(v.id,e),f(t=>{let a={...t};return delete a[e],a}),T===e&&J())})(e),className:"text-red-400 hover:text-red-200 p-1",title:"データを削除",children:(0,s.jsx)(I,{className:"w-4 h-4"})})},e):(0,s.jsx)("td",{className:"border border-gray-600 ".concat(r.isSevere?"bg-red-600":"bg-gray-700"),children:r.isSevere?"○":"\xd7"},e):(0,s.jsx)("td",{className:"border border-gray-600 bg-gray-100"},e)})]})]})]})}),W.isOpen&&W.item&&O[T]&&(0,s.jsx)(C,{item:W.item,currentValue:null==(a=O[T])||null==(t=a.items)?void 0:t[W.item.id],currentAssistValue:null==(n=O[T])||null==(r=n.items)?void 0:r["".concat(W.item.id,"_assist")],onSave:G,onClose:()=>H(e=>({...e,isOpen:!1})),position:W.position})]})},T=o("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),z=()=>{let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)({}),[n,i]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[c,x]=(0,l.useState)(256),[g,h]=(0,l.useState)(!1),[b,m]=(0,l.useState)(0),[y,f]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=e=>{g&&x(Math.max(200,Math.min(600,e.clientX)))},t=()=>h(!1);return g&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[g]),(0,l.useEffect)(()=>{let e=new Date;d("".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))),(()=>{let e=localStorage.getItem(u);if(e)return JSON.parse(e);{let{patients:e,admissions:t}=(()=>{let e=[],t=[];for(let a=1;a<=60;a++){let s=String(a).padStart(3,"0"),l=a%2==0,r=1940+a%50,n=String(a%12+1).padStart(2,"0"),i=String(a%28+1).padStart(2,"0"),o="".concat(r,"-").concat(n,"-").concat(i),d=String((a+3)%12+1).padStart(2,"0"),c=String((a+5)%28+1).padStart(2,"0"),x="2024-".concat(d,"-").concat(c),g=["西病棟","東病棟","南病棟"][a%3],h="".concat(a%5+1,"0").concat(a%10),b=a%5==0,m=a%7==0,u=a%8==0;!function(a,s,l,r,n,i){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],x="p".concat(a);e.push({id:x,identifier:"100".concat(a),name:s,gender:l,birthDate:r,postalCode:"100-0001",address:"東京都千代田区千代田1-1",memo:d?"入退院を繰り返しています":o?"退院済み":"",excludeFromAssessment:c}),d&&t.push({id:"adm".concat(a,"_past"),patientId:x,admissionDate:"2023-01-10",dischargeDate:"2023-02-15",initialWard:"東病棟",initialRoom:"201"}),t.push({id:"adm".concat(a),patientId:x,admissionDate:n,dischargeDate:o?"2024-05-20":void 0,initialWard:"一般病棟",initialRoom:i})}(s,"ダミー 患者".concat(a),l?"2":"1",o,x,h,b,m,u),t.length>0&&(t[t.length-1].initialWard=g)}return{patients:e,admissions:t}})();return localStorage.setItem(u,JSON.stringify(e)),localStorage.setItem(p,JSON.stringify(t))}})();let a=j();t(a);let s={};a.forEach(e=>{s[e.id]=N(e.id)}),r(s),a.length>0&&i(a[0].id)},[]),(0,s.jsxs)("div",{className:"flex flex-1 h-full overflow-hidden bg-gray-100 relative",children:[(0,s.jsxs)("div",{className:"bg-white border-r border-gray-200 flex flex-col shrink-0 relative group",style:{width:c},children:[(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-4 cursor-col-resize z-50 flex flex-col justify-start pt-32 items-center -mr-2 select-none",onMouseDown:e=>{e.preventDefault(),h(!0)},children:(0,s.jsx)("div",{className:"w-1.5 h-16 bg-gray-300 rounded-full transition-colors hover:bg-gray-500 shadow-sm"})}),(0,s.jsx)("div",{className:"p-4 border-b border-gray-200 bg-blue-50",children:(0,s.jsxs)("h1",{className:"text-lg font-bold text-blue-800 flex items-center gap-2",children:[(0,s.jsx)(T,{className:"w-5 h-5"})," 患者一覧"]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:e.map(e=>{let t=(a[e.id]||[]).sort((e,t)=>t.admissionDate.localeCompare(e.admissionDate))[0],l=t&&(!t.dischargeDate||t.dischargeDate>=o),r=t?"".concat(t.admissionDate," 入院"):"未入院";return(0,s.jsxs)("button",{onClick:()=>(e=>{n!==e&&(!y||confirm("編集中のデータがあります。破棄して別の患者へ移動しますか？"))&&(i(e),f(!1))})(e.id),className:"w-full text-left p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ".concat(n===e.id?"bg-blue-100 border-l-4 border-l-blue-600":""),children:[(0,s.jsxs)("div",{className:"font-bold text-gray-800",children:[e.name," ",(0,s.jsxs)("span",{className:"text-xs font-normal text-gray-500",children:["(",e.identifier,")"]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["1"===e.gender?"男性":"女性"," / ",e.birthDate,"生 / ",(0,s.jsx)("span",{className:l?"text-blue-600 font-bold":"",children:r})]})]},e.id)})}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 text-xs text-gray-400 text-center",children:"Nursing Assessment System v1.1"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 flex flex-col gap-4",children:n&&o&&(0,s.jsx)("section",{className:"w-full min-w-0",children:(0,s.jsx)(A,{patientId:n,currentDate:o,onDateSelect:d,lastUpdated:b,onDirtyChange:f})})})]})},O=o("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),L=o("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),F=o("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),R=()=>(0,s.jsxs)("div",{className:"p-8 h-full bg-gray-50 overflow-y-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"ダッシュボード (当月統計)"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)(V,{title:"入院患者数",value:"42",subtext:"前月比 +3",icon:c,color:"blue"}),(0,s.jsx)(V,{title:"重症度該当率",value:"38%",subtext:"目標: 35%以上",icon:O,color:"green"}),(0,s.jsx)(V,{title:"A項目 2点以上",value:"15",subtext:"平均推移: 横ばい",icon:L,color:"purple"}),(0,s.jsx)(V,{title:"未評価アラート",value:"2",subtext:"要確認",icon:F,color:"red"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 h-64 flex items-center justify-center text-gray-400",children:"[重症度推移グラフ エリア]"}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 h-64 flex items-center justify-center text-gray-400",children:"[病棟別訳あり患者分布 エリア]"})]})]}),V=e=>{let{title:t,value:a,subtext:l,icon:r,color:n}=e;return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:t}),(0,s.jsx)("h3",{className:"text-3xl font-bold text-gray-800 mt-1",children:a})]}),(0,s.jsx)("div",{className:"p-3 rounded-full ".concat({blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",red:"bg-red-100 text-red-600"}[n]),children:(0,s.jsx)(r,{className:"w-6 h-6"})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:l})]})},W=()=>(0,s.jsxs)("div",{className:"p-8 h-full bg-gray-50 flex flex-col items-center justify-center text-gray-400",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(x,{className:"w-12 h-12"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-600",children:"病棟・病室管理"}),(0,s.jsx)("p",{className:"mt-2",children:"この機能は現在開発中です (Phase 2)"})]}),H=o("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),q=o("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),U=o("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),J=o("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),B=o("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),P=o("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Y=o("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),G=o("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),K=e=>{let{initialPatient:t,initialAdmissions:a=[],onSave:r,onCancel:n}=e,[i,o]=(0,l.useState)((null==t?void 0:t.identifier)||""),[d,c]=(0,l.useState)((null==t?void 0:t.name)||""),[x,g]=(0,l.useState)((null==t?void 0:t.gender)||"1"),[h,b]=(0,l.useState)((null==t?void 0:t.birthDate)||""),[m,u]=(0,l.useState)((null==t?void 0:t.postalCode)||""),[p,y]=(0,l.useState)((null==t?void 0:t.address)||""),[f,v]=(0,l.useState)((null==t?void 0:t.memo)||""),[j,N]=(0,l.useState)((null==t?void 0:t.excludeFromAssessment)||!1),[w,k]=(0,l.useState)(a),[S,C]=(0,l.useState)(!1),_=["101","102","103","105","106","201","202","203","205","206","301","302","303","305","306","西101","西102","東101","東102"],M=i&&d&&h,E=async()=>{if(!m||m.length<7)return void alert("7桁の郵便番号を入力してください");C(!0);try{let e=await fetch("https://zipcloud.ibsnet.co.jp/api/search?zipcode=".concat(m)),t=await e.json();if(t.results){let e=t.results[0],a="".concat(e.address1).concat(e.address2).concat(e.address3);y(a)}else alert("住所が見つかりませんでした")}catch(e){console.error(e),alert("住所検索に失敗しました")}finally{C(!1)}},A=(e,t,a)=>{k(w.map(s=>s.id===e?{...s,[t]:a}:s))};return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 text-lg",children:[(0,s.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center shrink-0 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:(null==t?void 0:t.id)?"患者情報の編集":"新規患者登録"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:n,className:"px-6 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-100 font-bold",children:"キャンセル"}),(0,s.jsxs)("button",{onClick:()=>{if(!M)return;let e={id:(null==t?void 0:t.id)||"",identifier:i,name:d,gender:x,birthDate:h,postalCode:m,address:p,memo:f,excludeFromAssessment:j};r(e,w)},disabled:!M,className:"px-6 py-2 rounded-lg text-white font-bold flex items-center gap-2\n                    ".concat(M?"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed","\n                "),children:[(0,s.jsx)(D,{className:"w-5 h-5"})," 保存する"]})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2 border-b pb-4",children:[(0,s.jsx)(T,{className:"w-6 h-6 text-gray-500"})," 基本情報"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:["患者ID ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono",placeholder:"例: 10001"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:["氏名 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"例: 山田 太郎"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"性別"}),(0,s.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1 w-fit",children:[{val:"1",label:"男性"},{val:"2",label:"女性"},{val:"3",label:"その他"}].map(e=>(0,s.jsx)("button",{onClick:()=>g(e.val),className:"px-6 py-2 rounded-md font-bold transition-all ".concat(x===e.val?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:e.label},e.val))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:["生年月日 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"date",value:h,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,s.jsx)("div",{className:"md:col-span-2 border-t border-gray-100 my-2"}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"評価対象区分"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("button",{onClick:()=>N(!1),className:"flex-1 py-4 px-6 rounded-lg border-2 font-bold flex items-center justify-center gap-3 transition-all\n                                    ".concat(j?"border-gray-200 text-gray-400 hover:border-gray-300":"border-blue-500 bg-blue-50 text-blue-700","\n                                "),children:[(0,s.jsx)(O,{className:"w-5 h-5"})," 評価対象"]}),(0,s.jsxs)("button",{onClick:()=>N(!0),className:"flex-1 py-4 px-6 rounded-lg border-2 font-bold flex items-center justify-center gap-3 transition-all\n                                    ".concat(j?"border-red-500 bg-red-50 text-red-700":"border-gray-200 text-gray-400 hover:border-gray-300","\n                                "),children:[(0,s.jsx)(U,{className:"w-5 h-5"})," 評価対象外"]})]}),j&&(0,s.jsx)("p",{className:"mt-2 text-red-600 text-sm font-bold pl-1",children:"※ この患者は看護必要度評価の対象から除外されます（集計に含まれません）。"})]}),(0,s.jsx)("div",{className:"md:col-span-2 border-t border-gray-100 my-2"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"郵便番号"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono",placeholder:"1000001",maxLength:8}),(0,s.jsx)("button",{onClick:E,disabled:S,className:"bg-gray-800 text-white px-4 py-2 rounded-lg font-bold hover:bg-gray-700 whitespace-nowrap shadow-sm",children:S?"...":"住所検索"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"住所"}),(0,s.jsx)("input",{type:"text",value:p,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"東京都千代田区..."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-2",children:"メモ"}),(0,s.jsx)("textarea",{value:f,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 text-xl border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none h-24",placeholder:"特記事項があれば入力してください"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,s.jsx)(O,{className:"w-6 h-6 text-gray-500"})," 入院歴"]}),(0,s.jsxs)("button",{onClick:()=>{k([...w,{id:"temp_".concat(Date.now()),patientId:(null==t?void 0:t.id)||"",admissionDate:new Date().toISOString().split("T")[0],initialWard:"一般病棟",initialRoom:""}])},className:"text-blue-600 font-bold hover:bg-blue-50 px-3 py-1 rounded transition-colors flex items-center gap-1",children:[(0,s.jsx)(H,{className:"w-5 h-5"})," 入院追加"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[0===w.length&&(0,s.jsx)("div",{className:"text-center py-8 text-gray-400 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:"入院履歴がありません"}),w.map((e,t)=>(0,s.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg border border-gray-200 relative group",children:[(0,s.jsx)("button",{onClick:()=>{var t;return t=e.id,void k(w.filter(e=>e.id!==t))},className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors p-2",title:"削除",children:(0,s.jsx)(I,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pr-10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"入院日"}),(0,s.jsx)("input",{type:"date",value:e.admissionDate,onChange:t=>A(e.id,"admissionDate",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded bg-white"})]}),(0,s.jsx)("span",{className:"text-gray-400 pt-5",children:"〜"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"退院日 (空欄で入院中)"}),(0,s.jsx)("input",{type:"date",value:e.dischargeDate||"",onChange:t=>A(e.id,"dischargeDate",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded bg-white"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"入院時病棟"}),(0,s.jsxs)("select",{value:e.initialWard||"",onChange:t=>A(e.id,"initialWard",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded bg-white",children:[(0,s.jsx)("option",{value:"",children:"選択..."}),(0,s.jsx)("option",{value:"一般病棟",children:"一般病棟"}),(0,s.jsx)("option",{value:"西病棟",children:"西病棟"}),(0,s.jsx)("option",{value:"東病棟",children:"東病棟"}),(0,s.jsx)("option",{value:"南病棟",children:"南病棟"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"入院時病室"}),(0,s.jsxs)("select",{value:e.initialRoom||"",onChange:t=>A(e.id,"initialRoom",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded bg-white",children:[(0,s.jsx)("option",{value:"",children:"選択..."}),_.map(e=>(0,s.jsxs)("option",{value:e,children:[e,"号室"]},e))]})]})]})]})]},e.id))]})]})]})})]})},X=e=>{let{patient:t,admissions:a,onBack:r,onUpdate:n,onEditingChange:i}=e,[o,d]=(0,l.useState)("basic"),[c,x]=(0,l.useState)(new Date().toISOString().split("T")[0]),[g,h]=(0,l.useState)(!1);return((0,l.useEffect)(()=>(null==i||i(g),()=>null==i?void 0:i(!1)),[g,i]),g)?(0,s.jsx)(K,{initialPatient:t,initialAdmissions:a,onSave:(e,t)=>{f(e),v(e.id,t),h(!1),n&&n()},onCancel:()=>h(!1)}):(0,s.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 text-lg",children:[" ",(0,s.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center gap-4 shrink-0 shadow-sm",children:[(0,s.jsx)("button",{onClick:r,className:"p-3 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(Y,{className:"w-6 h-6 text-gray-600"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[t.name,(0,s.jsxs)("span",{className:"text-lg font-normal text-gray-500",children:["(",t.identifier,")"]}),t.excludeFromAssessment&&(0,s.jsx)("span",{className:"bg-red-100 text-red-700 text-sm px-3 py-1 rounded-full font-bold",children:"評価対象外"})]})})]}),(0,s.jsxs)("div",{className:"px-6 pt-4 flex gap-2 border-b border-gray-200 shrink-0",children:[(0,s.jsxs)("button",{onClick:()=>d("basic"),className:"px-6 py-3 text-lg font-bold rounded-t-lg flex items-center gap-2 border-t border-l border-r border-transparent\n              ".concat("basic"===o?"bg-white text-blue-600 border-gray-200 border-b-white translate-y-[1px]":"text-gray-500 hover:text-gray-700 hover:bg-gray-100","\n            "),children:[(0,s.jsx)(T,{className:"w-5 h-5"})," 基本情報・入院歴"]}),(0,s.jsxs)("button",{onClick:()=>d("matrix"),className:"px-6 py-3 text-lg font-bold rounded-t-lg flex items-center gap-2 border-t border-l border-r border-transparent\n              ".concat("matrix"===o?"bg-white text-blue-600 border-gray-200 border-b-white translate-y-[1px]":"text-gray-500 hover:text-gray-700 hover:bg-gray-100","\n            "),children:[(0,s.jsx)(O,{className:"w-5 h-5"})," 看護必要度マトリクス"]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto p-8",children:["basic"===o&&(0,s.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,s.jsx)(G,{className:"w-6 h-6"})," 患者基本情報"]}),(0,s.jsx)("button",{onClick:()=>h(!0),className:"text-blue-600 font-bold hover:underline text-lg",children:"編集する"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"患者ID"}),(0,s.jsx)("p",{className:"font-mono text-xl text-gray-800",children:t.identifier})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"氏名"}),(0,s.jsx)("p",{className:"text-xl text-gray-800",children:t.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"性別"}),(0,s.jsx)("p",{className:"text-xl text-gray-800",children:"1"===t.gender?"男性":"2"===t.gender?"女性":"その他"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"生年月日"}),(0,s.jsx)("p",{className:"text-xl text-gray-800",children:t.birthDate})]}),(0,s.jsx)("div",{className:"col-span-2 border-t border-gray-100 my-2"}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"評価対象区分"}),(0,s.jsx)("div",{className:"mt-1",children:t.excludeFromAssessment?(0,s.jsxs)("span",{className:"flex items-center gap-2 text-red-600 font-bold text-xl",children:[(0,s.jsx)(U,{className:"w-5 h-5 fill-red-100"})," 評価対象外"]}):(0,s.jsx)("span",{className:"text-xl text-gray-800",children:"評価対象"})})]}),(0,s.jsx)("div",{className:"col-span-2 border-t border-gray-100 my-2"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"郵便番号"}),(0,s.jsx)("p",{className:"text-xl text-gray-800 font-mono",children:t.postalCode||"-"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"住所"}),(0,s.jsx)("p",{className:"text-xl text-gray-800",children:t.address||"-"})]}),(0,s.jsx)("div",{className:"col-span-2 border-t border-gray-100 my-2"}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 uppercase mb-1",children:"患者メモ"}),(0,s.jsx)("p",{className:"text-xl text-gray-800 whitespace-pre-wrap leading-relaxed",children:t.memo||"特記事項なし"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,s.jsx)(O,{className:"w-6 h-6"})," 入院歴"]})}),a.length>0?(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-2 mb-2",children:[(0,s.jsxs)("div",{className:"text-xl font-bold text-gray-800 font-mono",children:[e.admissionDate," ",(0,s.jsx)("span",{className:"text-gray-400 mx-2",children:"〜"})," ",e.dischargeDate||"継続中"]}),!e.dischargeDate&&(0,s.jsx)("span",{className:"bg-green-100 text-green-700 font-bold px-3 py-1 rounded text-base inline-block text-center",children:"入院中"})]}),(0,s.jsxs)("div",{className:"text-lg text-gray-600",children:["開始病棟: ",(0,s.jsx)("span",{className:"font-semibold",children:e.initialWard||"-"})," / ",(0,s.jsx)("span",{className:"font-semibold",children:e.initialRoom||"-"}),"号室"]})]},e.id))}):(0,s.jsx)("p",{className:"text-gray-400 text-lg",children:"入院歴はありません"})]})]}),"matrix"===o&&(0,s.jsx)("div",{className:"h-full bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsx)(A,{patientId:t.id,currentDate:c,onDateSelect:x})})]})]})},Z=e=>{let{onEditingChange:t}=e,[a,r]=(0,l.useState)([]),[n,i]=(0,l.useState)({}),[o,d]=(0,l.useState)(null),[x,g]=(0,l.useState)(""),[h,b]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[p,y]=(0,l.useState)(""),[w,k]=(0,l.useState)(!1),[S,C]=(0,l.useState)(!1),[_,D]=(0,l.useState)(null);(0,l.useEffect)(()=>{null==t||t(S)},[S,t]);let[M,E]=(0,l.useState)(1);(0,l.useEffect)(()=>{let e=j();r(e);let t={};e.forEach(e=>{t[e.id]=N(e.id)}),i(t)},[]);let I=(0,l.useMemo)(()=>a.filter(e=>!!(e.name.includes(x)||e.identifier&&e.identifier.includes(x))&&(!h||e.birthDate===h)&&(!m&&!p||!!(n[e.id]||[]).some(e=>{let t=e.admissionDate,a=e.dischargeDate||"9999-12-31",s=m||"0000-01-01";return t<=(p||"9999-12-31")&&a>=s}))&&(!w||!!e.excludeFromAssessment)).sort((e,t)=>t.id.localeCompare(e.id)),[a,x,h,m,p,w,n]),A=Math.ceil(I.length/20),T=(0,l.useMemo)(()=>{let e=(M-1)*20;return I.slice(e,e+20)},[M,I]),z=(e,t)=>{e(t),E(1)};return S&&_?(0,s.jsx)(K,{initialPatient:_,onSave:(e,t)=>{f(e),v(e.id,t),r(j());let a={};j().forEach(e=>{a[e.id]=N(e.id)}),i(a),C(!1),D(null)},onCancel:()=>{C(!1),D(null)}}):o?(0,s.jsx)(X,{patient:o,admissions:n[o.id]||[],onEditingChange:t,onBack:()=>d(null),onUpdate:()=>{r(j());let e={};j().forEach(t=>{e[t.id]=N(t.id)}),i(e)}}):(0,s.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 text-lg",children:[(0,s.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center shrink-0",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[(0,s.jsx)(c,{className:"w-8 h-8 text-blue-600"}),"患者管理"]}),(0,s.jsxs)("button",{onClick:()=>{let e=j(),t=0;e.forEach(e=>{let a=parseInt(e.identifier,10);!isNaN(a)&&a>t&&(t=a)}),D({id:"",identifier:String(t+1).padStart(5,"0"),name:"",gender:"1",birthDate:"",postalCode:"",address:"",memo:"",excludeFromAssessment:!1}),C(!0)},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 shadow-sm transition-colors flex items-center gap-2 font-bold text-lg",children:[(0,s.jsx)(H,{className:"w-5 h-5"})," 新規患者登録"]})]}),(0,s.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex flex-wrap gap-4 items-end shrink-0 shadow-sm",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"キーワード検索"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(q,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"氏名・ID...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md w-64 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",value:x,onChange:e=>z(g,e.target.value)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"生年月日"}),(0,s.jsx)("input",{type:"date",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",value:h,onChange:e=>z(b,e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"入院期間 (開始)"}),(0,s.jsx)("input",{type:"date",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",value:m,onChange:e=>z(u,e.target.value)})]}),(0,s.jsx)("span",{className:"text-gray-400 mt-8",children:"〜"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"入院期間 (終了)"}),(0,s.jsx)("input",{type:"date",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",value:p,onChange:e=>z(y,e.target.value)})]})]}),(0,s.jsx)("div",{className:"pb-3 pl-4",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500",checked:w,onChange:e=>z(k,e.target.checked)}),(0,s.jsx)("span",{className:"text-lg font-bold text-gray-700",children:"評価対象外のみ"})]})})]}),(0,s.jsx)("div",{className:"p-6 flex-1 overflow-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,s.jsxs)("table",{className:"w-full text-left",children:[(0,s.jsx)("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b border-gray-200 text-lg",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"患者ID"}),(0,s.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"氏名"}),(0,s.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"性別"}),(0,s.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"生年月日"}),(0,s.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"対象外"}),(0,s.jsx)("th",{className:"px-6 py-4 whitespace-nowrap text-center",children:"メモ"}),(0,s.jsx)("th",{className:"px-6 py-4 min-w-[300px]",children:"最新の入院歴"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[T.map(e=>{let t=(n[e.id]||[]).sort((e,t)=>t.admissionDate.localeCompare(e.admissionDate))[0],a=t?"".concat(t.admissionDate," 〜 ").concat(t.dischargeDate||"入院中"):"記録なし",l=t?"".concat(t.initialWard||"-"," / ").concat(t.initialRoom||"-"):"-";return(0,s.jsxs)("tr",{onClick:()=>d(e),className:"hover:bg-blue-50 transition-colors cursor-pointer group text-xl",children:[(0,s.jsx)("td",{className:"px-6 py-4 font-mono text-gray-600 text-center",children:e.identifier}),(0,s.jsx)("td",{className:"px-6 py-4 font-bold text-gray-800 text-center",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 text-gray-600 text-center",children:"1"===e.gender?"男性":"2"===e.gender?"女性":"その他"}),(0,s.jsx)("td",{className:"px-6 py-4 text-gray-600 font-mono text-center",children:e.birthDate}),(0,s.jsx)("td",{className:"px-6 py-4 text-center",children:e.excludeFromAssessment&&(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(U,{className:"w-6 h-6 text-red-500 fill-red-100"})})}),(0,s.jsx)("td",{className:"px-6 py-4 text-gray-500 text-lg max-w-xs truncate text-center",children:e.memo||"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(J,{className:"w-5 h-5 text-gray-400"})," ",a]}),(0,s.jsxs)("div",{className:"text-base text-gray-500 mt-1 ml-7",children:["病棟: ",l]})]})})]},e.id)}),0===T.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 text-lg",children:"条件に一致する患者が見つかりません"})})]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["全 ",I.length," 件中 ",Math.min((M-1)*20+1,I.length)," - ",Math.min(20*M,I.length)," 件を表示"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>E(e=>Math.max(1,e-1)),disabled:1===M,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:(0,s.jsx)(B,{className:"w-6 h-6"})}),(0,s.jsxs)("span",{className:"text-lg font-medium text-gray-700 px-2",children:["page ",M," / ",Math.max(1,A)]}),(0,s.jsx)("button",{onClick:()=>E(e=>Math.min(A,e+1)),disabled:M===A||0===A,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:(0,s.jsx)(P,{className:"w-6 h-6"})})]})]})]})})]})};function $(){let[e,t]=(0,l.useState)("home"),[a,r]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100 overflow-hidden",children:[(0,s.jsx)(h,{activeTab:e,onTabChange:e=>{if(a){if(!window.confirm("編集中のデータは破棄されますが、移動してもよろしいですか？"))return;r(!1)}t(e)}}),(0,s.jsxs)("main",{className:"flex-1 overflow-hidden relative",children:["home"===e&&(0,s.jsx)(R,{}),"inpatients"===e&&(0,s.jsx)(z,{}),"patients"===e&&(0,s.jsx)(Z,{onEditingChange:r}),"wards"===e&&(0,s.jsx)(W,{}),"settings"===e&&(0,s.jsx)("div",{className:"p-8 text-center text-gray-400",children:"設定画面 (Coming Soon)"})]})]})}},6387:(e,t,a)=>{Promise.resolve().then(a.bind(a,5891))}},e=>{e.O(0,[441,255,358],()=>e(e.s=6387)),_N_E=e.O()}]);